!function(){function O(Xc,BV,YN){function GC(nz,ZB){if(!BV[nz]){if(!Xc[nz]){var cD="function"==typeof require&&require;if(!ZB&&cD)return cD(nz,!0);if(rE)return rE(nz,!0);var xo=new Error("Cannot find module '"+nz+"'");throw xo.code="MODULE_NOT_FOUND",xo}var kA=BV[nz]={exports:{}};Xc[nz][0].call(kA.exports,(function(O){var BV;return GC(Xc[nz][1][O]||O)}),kA,kA.exports,O,Xc,BV,YN)}return BV[nz].exports}for(var rE="function"==typeof require&&require,nz=0;nz<YN.length;nz++)GC(YN[nz]);return GC}return O}()({1:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.IMG_FILTER_ID=BV.MSG_CLEANUP=BV.ROOT_VARS_PREFIX=BV.META_PROPERTY=BV.STYLESHEET_COMMON_CLASSNAME=BV.PROXY_SELECTOR=BV.EVENT_PREFIX=BV.STYLESHEET_CORS_SELECTOR=BV.STYLESHEET_SYNC_SELECTOR=BV.STYLESHEET_ROOT_VARS_SELECTOR=BV.STYLESHEET_INLINE_SELECTOR=BV.STYLESHEET_OVERRIDE_SELECTOR=BV.STYLESHEET_VARIABLES_SELECTOR=BV.STYLESHEET_INVERT_SELECTOR=BV.STYLESHEET_TEXT_SELECTOR=BV.STYLESHEET_USER_AGENT_SELECTOR=BV.STYLESHEET_FALLBACK_SELECTOR=BV.MISC_PREFIX=void 0;const YN=O("./prefix");BV.MISC_PREFIX=YN.PREFIX,BV.STYLESHEET_FALLBACK_SELECTOR=`.${YN.PREFIX}-fb`,BV.STYLESHEET_USER_AGENT_SELECTOR=`.${YN.PREFIX}-ua`,BV.STYLESHEET_TEXT_SELECTOR=`.${YN.PREFIX}-tx`,BV.STYLESHEET_INVERT_SELECTOR=`.${YN.PREFIX}-iv`,BV.STYLESHEET_VARIABLES_SELECTOR=`.${YN.PREFIX}-vb`,BV.STYLESHEET_OVERRIDE_SELECTOR=`.${YN.PREFIX}-or`,BV.STYLESHEET_INLINE_SELECTOR=`.${YN.PREFIX}-il`,BV.STYLESHEET_ROOT_VARS_SELECTOR=`.${YN.PREFIX}-rv`,BV.STYLESHEET_SYNC_SELECTOR=`.${YN.PREFIX}-sn`,BV.STYLESHEET_CORS_SELECTOR=`.${YN.PREFIX}-cr`,BV.EVENT_PREFIX=`__${YN.PREFIX}__`,BV.PROXY_SELECTOR=`.${YN.PREFIX}-pr`,BV.STYLESHEET_COMMON_CLASSNAME=`${YN.PREFIX}m2`,BV.META_PROPERTY=YN.PREFIX,BV.ROOT_VARS_PREFIX=YN.PREFIX,BV.MSG_CLEANUP=BV.EVENT_PREFIX+"cleanUp",BV.IMG_FILTER_ID=`${YN.PREFIX}-image-filter`},{"./prefix":29}],2:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0});const YN=O("../defaults"),GC=O("./dynamic-theme");async function rE(O,Xc,BV){"cleanStyle"===(null==O?void 0:O.action)&&(0,GC.removeDynamicTheme)()}async function nz(){chrome.runtime.onMessage.addListener(rE);const O=await chrome.runtime.sendMessage({action:"getStyle"});if(O){const Xc=window.top===window;(0,GC.createOrUpdateDynamicTheme)(YN.DEFAULT_THEME,O,Xc)}}nz()},{"../defaults":20,"./dynamic-theme":7}],3:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.createAdoptedStyleSheetOverride=void 0;const YN=O("./stylesheet-modifier"),GC=new WeakMap,rE=new WeakSet;function nz(O){let Xc=!1;function BV(Xc,BV){const YN=[...O.adoptedStyleSheets],GC=YN.indexOf(Xc),rE=YN.indexOf(BV);GC!==rE-1&&(rE>=0&&YN.splice(rE,1),YN.splice(GC+1,0,BV),O.adoptedStyleSheets=YN)}function nz(){Xc=!0;const BV=[...O.adoptedStyleSheets];O.adoptedStyleSheets.forEach((O=>{if(rE.has(O)){const Xc=BV.indexOf(O);Xc>=0&&BV.splice(Xc,1),GC.delete(O),rE.delete(O)}})),O.adoptedStyleSheets=BV}function ZB(nz,ZB){O.adoptedStyleSheets.forEach((O=>{if(rE.has(O))return;const cD=O.rules,xo=new CSSStyleSheet;function kA(){for(let O=xo.cssRules.length-1;O>=0;O--)xo.deleteRule(O);return BV(O,xo),GC.set(O,xo),rE.add(xo),xo}const qr=undefined;(0,YN.createStyleSheetModifier)().modifySheet({prepareSheet:kA,sourceCSSRules:cD,theme:nz,ignoreImageAnalysis:ZB,force:!1,isAsyncCancelled:()=>Xc})}))}return{render:ZB,destroy:nz}}BV.createAdoptedStyleSheetOverride=nz},{"./stylesheet-modifier":14}],4:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.replaceCSSFontFace=BV.removeCSSComments=BV.replaceCSSRelativeURLsWithAbsolute=BV.getCSSBaseBath=BV.getCSSURLValue=BV.cssImportRegex=BV.cssURLRegex=BV.iterateCSSDeclarations=BV.iterateCSSRules=void 0;const YN=O("../../utils/array"),GC=O("../../utils/platform"),rE=O("../../utils/url"),nz=O("../utils/log");function ZB(O,Xc,BV){(0,YN.forEach)(O,(O=>{if(O.selectorText)Xc(O);else if(O.href)try{ZB(O.styleSheet.cssRules,Xc,BV)}catch(O){(0,nz.logInfo)(`Found a non-loaded link.`),BV&&BV()}else if(O.media){const YN=Array.from(O.media),GC=YN.some((O=>O.startsWith("screen")||O.startsWith("all")||O.startsWith("("))),rE=YN.some((O=>O.startsWith("print")||O.startsWith("speech")));!GC&&rE||ZB(O.cssRules,Xc,BV)}else O.conditionText?CSS.supports(O.conditionText)&&ZB(O.cssRules,Xc,BV):(0,nz.logWarn)(`CSSRule type not supported`,O)}))}BV.iterateCSSRules=ZB;const cD=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],xo=GC.isSafari?cD.map((O=>{const Xc=undefined;return[O,new RegExp(`${O}:\\s*(.*?)\\s*;`)]})):null;function kA(O,Xc){(0,YN.forEach)(O,(BV=>{const YN=O.getPropertyValue(BV).trim();YN&&Xc(BV,YN)}));const BV=O.cssText;BV.includes("var(")&&(GC.isSafari?xo.forEach((([O,YN])=>{const GC=BV.match(YN);if(GC&&GC[1]){const BV=GC[1].trim();Xc(O,BV)}})):cD.forEach((BV=>{const YN=O.getPropertyValue(BV);YN&&YN.includes("var(")&&Xc(BV,YN)})))}function qr(O){return O.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function b(O){const Xc=(0,rE.parseURL)(O);return`${Xc.origin}${Xc.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function TK(O,Xc){return O.replace(BV.cssURLRegex,(O=>{const BV=qr(O);try{return`url('${(0,rE.getAbsoluteURL)(Xc,BV)}')`}catch(Xc){return(0,nz.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),O}}))}BV.iterateCSSDeclarations=kA,BV.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,BV.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,BV.getCSSURLValue=qr,BV.getCSSBaseBath=b,BV.replaceCSSRelativeURLsWithAbsolute=TK;const tA=/\/\*[\s\S]*?\*\//g;function mb(O){return O.replace(tA,"")}BV.removeCSSComments=mb;const Jw=/@font-face\s*{[^}]*}/g;function yS(O){return O.replace(Jw,"")}BV.replaceCSSFontFace=yS},{"../../utils/array":30,"../../utils/platform":40,"../../utils/url":45,"../utils/log":19}],5:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.combineFixes=BV.findRelevantFix=void 0;const YN=O("../utils/log"),GC=O("../../utils/url");function rE(O,Xc){if(!Array.isArray(Xc)||0===Xc.length||"*"!==Xc[0].url[0])return(0,YN.logWarn)("selectRelevantFix() failed to construct a single fix",O,Xc),null;let BV=0,rE=null;for(let YN=1;YN<Xc.length;YN++)if((0,GC.isURLInList)(O,Xc[YN].url)){const O=Xc[YN].url[0].length;(null===rE||BV<O)&&(BV=O,rE=YN)}return rE}function nz(O){if(0===O.length||"*"!==O[0].url[0])return(0,YN.logWarn)("combineFixes() failed to construct a single fix",O),null;function Xc(O){return O.filter(Boolean).flat()}return{url:[],invert:Xc(O.map((O=>O.invert))),css:O.map((O=>O.css)).filter(Boolean).join("\n"),ignoreInlineStyle:Xc(O.map((O=>O.ignoreInlineStyle))),ignoreImageAnalysis:Xc(O.map((O=>O.ignoreImageAnalysis))),disableStyleSheetsProxy:O.some((O=>O.disableStyleSheetsProxy))}}BV.findRelevantFix=rE,BV.combineFixes=nz},{"../../utils/url":45,"../utils/log":19}],6:[function(O,Xc,BV){"use strict";var YN=void 0&&(void 0).__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(BV,"__esModule",{value:!0}),BV.cleanImageProcessingCache=BV.getFilteredImageDataURL=BV.getImageDetails=void 0;const GC=O("../../generators/svg-filter"),rE=O("./network"),nz=O("../../utils/color"),ZB=O("../../utils/network"),cD=O("../utils/log"),xo=YN(O("../../utils/async-queue")),kA=O("../../const"),qr=new xo.default;async function b(O){return new Promise((async(Xc,BV)=>{let YN;if(O.startsWith("data:"))YN=O;else try{YN=await TK(O)}catch(O){return void BV(O)}try{const BV=await tA(YN);qr.addToQueue((()=>{Xc(Object.assign({src:O,dataURL:YN,width:BV.naturalWidth,height:BV.naturalHeight},nx(BV)))}))}catch(O){BV(O)}}))}async function TK(O){const Xc=undefined;return new URL(O).origin===location.origin?await(0,ZB.loadAsDataURL)(O):await(0,rE.bgFetch)({url:O,responseType:"data-url"})}async function tA(O){return new Promise(((Xc,BV)=>{const YN=new Image;YN.onload=()=>Xc(YN),YN.onerror=()=>BV(`Unable to load image ${O}`),YN.src=O}))}BV.getImageDetails=b;const mb=32*32;let Jw,yS;function bx(){const O=mb,Xc=mb;Jw=document.createElement("canvas"),Jw.width=O,Jw.height=Xc,yS=Jw.getContext("2d",{willReadFrequently:!0}),yS.imageSmoothingEnabled=!1}function CP(){Jw=null,yS=null}const UK=5*1024*1024;function nx(O){Jw||bx();const{naturalWidth:Xc,naturalHeight:BV}=O;if(0===BV||0===Xc)return(0,cD.logWarn)(`logWarn(Image is empty ${O.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const YN=undefined;if(Xc*BV*4>UK)return(0,cD.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const GC=Xc*BV,rE=Math.min(1,Math.sqrt(mb/GC)),ZB=Math.ceil(Xc*rE),xo=Math.ceil(BV*rE);yS.clearRect(0,0,ZB,xo),yS.drawImage(O,0,0,Xc,BV,0,0,ZB,xo);const kA=undefined,qr=yS.getImageData(0,0,ZB,xo).data,b=.05,TK=.4,tA=.7;let CP=0,nx=0,wd=0,Lg,ul,eV,qe,DT,KJ,tZ,BS;for(eV=0;eV<xo;eV++)for(ul=0;ul<ZB;ul++)Lg=4*(eV*ZB+ul),qe=qr[Lg+0],DT=qr[Lg+1],KJ=qr[Lg+2],tZ=qr[Lg+3],tZ/255<b?CP++:(BS=(0,nz.getSRGBLightness)(qe,DT,KJ),BS<TK&&nx++,BS>tA&&wd++);const Ge=ZB*xo,sg=Ge-CP,Kg=undefined,JB=undefined,nQ=undefined,FT=undefined;return{isDark:nx/sg>=.7,isLight:wd/sg>=.7,isTransparent:CP/Ge>=.1,isLarge:GC>=800*600,isTooLarge:!1}}function wd({dataURL:O,width:Xc,height:BV},YN){const rE=(0,GC.getSVGFilterMatrixValue)(YN),nz=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${Xc}" height="${BV}">`,"<defs>",`<filter id="${kA.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${rE}" />`,"</filter>","</defs>",`<image width="${Xc}" height="${BV}" filter="url(#${kA.IMG_FILTER_ID})" xlink:href="${O}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(nz)}`}function Lg(){qr&&qr.stopQueue(),CP()}BV.getFilteredImageDataURL=wd,BV.cleanImageProcessingCache=Lg},{"../../const":1,"../../generators/svg-filter":23,"../../utils/async-queue":31,"../../utils/color":33,"../../utils/network":38,"../utils/log":19,"./network":12}],7:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.cleanDynamicThemeCache=BV.removeDynamicTheme=BV.createOrUpdateDynamicThemeInternal=BV.createOrUpdateDynamicTheme=void 0;const YN=O("./inline-style"),GC=O("./meta-theme-color"),rE=O("./modify-css"),nz=O("./style-manager"),ZB=O("./watch"),cD=O("../../utils/array"),xo=O("../utils/dom"),kA=O("../utils/log"),qr=O("../../utils/throttle"),b=O("../../utils/math"),TK=O("../../generators/css-filter"),tA=O("../../generators/modify-colors"),mb=O("../../generators/text-style"),Jw=O("../../utils/uid"),yS=O("./adopted-style-manger"),bx=O("../../utils/platform"),CP=O("../../utils/color"),UK=O("../../utils/url"),nx=O("./variables"),wd=O("../../utils/visibility"),Lg=O("./fixes"),ul=O("../../const"),eV=O("./mv3-proxy"),qe=!1,DT=(0,Jw.generateUID)(),KJ=new Map,tZ=[];let BS=null,Ge=null,sg=null,Kg=[],JB=[];function nQ(O,Xc=document.head||document){let BV=Xc.querySelector(O);return BV||(BV=document.createElement("style"),BV.classList.add(ul.STYLESHEET_COMMON_CLASSNAME),BV.classList.add(O.substring(1)),BV.media="screen",BV.textContent=""),BV}function FT(O){(0,kA.logInfo)("MV3 proxy injector: regular path attempts to inject...");const Xc=document.createElement("script");Xc.src=chrome.runtime.getURL("js/proxy.js"),Xc.dataset.arg=JSON.stringify(O),document.head.prepend(Xc)}const Hm=new Map;function Li(O,Xc){Hm.has(Xc)&&Hm.get(Xc).stop(),Hm.set(Xc,(0,xo.watchForNodePosition)(O,"head"))}function nq(){(0,cD.forEach)(Hm.values(),(O=>O.stop())),Hm.clear()}function FE(){const O=nQ(ul.STYLESHEET_FALLBACK_SELECTOR,document);O.textContent=(0,rE.getModifiedFallbackStyle)(BS,{strict:!0}),document.head.insertBefore(O,document.head.firstChild),Li(O,"fallback");const Xc=nQ(ul.STYLESHEET_USER_AGENT_SELECTOR);Xc.textContent=(0,rE.getModifiedUserAgentStyle)(BS,sg,BS.styleSystemControls),document.head.insertBefore(Xc,O.nextSibling),Li(Xc,"user-agent");const BV=nQ(ul.STYLESHEET_TEXT_SELECTOR);BS.useFont||BS.textStroke>0?BV.textContent=(0,mb.createTextStyle)(BS):BV.textContent="",document.head.insertBefore(BV,O.nextSibling),Li(BV,"text");const GC=nQ(ul.STYLESHEET_INVERT_SELECTOR);Ge&&Array.isArray(Ge.invert)&&Ge.invert.length>0?GC.textContent=[`${Ge.invert.join(", ")} {`,`    filter: ${(0,TK.getCSSFilterValue)(Object.assign(Object.assign({},BS),{contrast:0===BS.mode?BS.contrast:(0,b.clamp)(BS.contrast-10,0,100)}))} !important;`,"}"].join("\n"):GC.textContent="",document.head.insertBefore(GC,BV.nextSibling),Li(GC,"invert");const nz=nQ(ul.STYLESHEET_INLINE_SELECTOR);nz.textContent=(0,YN.getInlineOverrideStyle)(),document.head.insertBefore(nz,GC.nextSibling),Li(nz,"inline");const ZB=nQ(ul.STYLESHEET_OVERRIDE_SELECTOR);ZB.textContent=Ge&&Ge.css?qQ(Ge.css):"",document.head.appendChild(ZB),Li(ZB,"override");const cD=nQ(ul.STYLESHEET_VARIABLES_SELECTOR),xo=(0,rE.getSelectionColor)(BS),{darkSchemeBackgroundColor:kA,darkSchemeTextColor:qr,lightSchemeBackgroundColor:Jw,lightSchemeTextColor:yS,mode:bx}=BS;let UK=0===bx?Jw:kA,nx=0===bx?yS:qr;UK=(0,tA.modifyBackgroundColor)((0,CP.parseColorWithCache)(UK),BS),nx=(0,tA.modifyForegroundColor)((0,CP.parseColorWithCache)(nx),BS),cD.textContent=[`:root {`,`   --${ul.ROOT_VARS_PREFIX}-neutral-background: ${UK};`,`   --${ul.ROOT_VARS_PREFIX}-neutral-text: ${nx};`,`   --${ul.ROOT_VARS_PREFIX}-selection-background: ${xo.backgroundColorSelection};`,`   --${ul.ROOT_VARS_PREFIX}-selection-text: ${xo.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(cD,nz.nextSibling),Li(cD,"variables");const wd=nQ(ul.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(wd,cD.nextSibling);const Lg=!(Ge&&Ge.disableStyleSheetsProxy);FT(Lg),document.dispatchEvent(new CustomEvent(eV.EVENT_ARG,{detail:Lg}))}const Kq=new Set;function Lr(O){const Xc=nQ(ul.STYLESHEET_INLINE_SELECTOR,O);Xc.textContent=(0,YN.getInlineOverrideStyle)(),O.insertBefore(Xc,O.firstChild);const BV=nQ(ul.STYLESHEET_OVERRIDE_SELECTOR,O);BV.textContent=Ge&&Ge.css?qQ(Ge.css):"",O.insertBefore(BV,Xc.nextSibling);const GC=nQ(ul.STYLESHEET_INVERT_SELECTOR,O);Ge&&Array.isArray(Ge.invert)&&Ge.invert.length>0?GC.textContent=[`${Ge.invert.join(", ")} {`,`    filter: ${(0,TK.getCSSFilterValue)(Object.assign(Object.assign({},BS),{contrast:0===BS.mode?BS.contrast:(0,b.clamp)(BS.contrast-10,0,100)}))} !important;`,"}"].join("\n"):GC.textContent="",O.insertBefore(GC,BV.nextSibling),Kq.add(O)}function qQ(O){return O.replace(/\${(.+?)}/g,((O,Xc)=>{const BV=(0,CP.parseColorWithCache)(Xc);return BV?(0,tA.modifyColor)(BV,BS):((0,kA.logWarn)("Couldn't parse CSSTemplate's color."),Xc)}))}function Qk(){const O=document.querySelector(ul.STYLESHEET_FALLBACK_SELECTOR);O&&(O.textContent="")}function RR(){Xd();const O=undefined,Xc=(0,nz.getManageableStyles)(document).filter((O=>!KJ.has(O))).map((O=>ED(O)));Xc.map((O=>O.details({secondRound:!1}))).filter((O=>O&&O.rules.length>0)).forEach((O=>{nx.variablesStore.addRulesForMatching(O.rules)})),nx.variablesStore.matchVariablesAndDependants(),nx.variablesStore.setOnRootVariableChange((()=>{const O=nQ(ul.STYLESHEET_ROOT_VARS_SELECTOR);nx.variablesStore.putRootVars(O,BS)}));const BV=nQ(ul.STYLESHEET_ROOT_VARS_SELECTOR);nx.variablesStore.putRootVars(BV,BS),KJ.forEach((O=>O.render(BS,Kg))),0===j.size&&Qk(),Xc.forEach((O=>O.watch()));const GC=(0,cD.toArray)(document.querySelectorAll(YN.INLINE_STYLE_SELECTOR));(0,xo.iterateShadowHosts)(document.documentElement,(O=>{Lr(O.shadowRoot);const Xc=O.shadowRoot.querySelectorAll(YN.INLINE_STYLE_SELECTOR);Xc.length>0&&(0,cD.push)(GC,Xc)})),GC.forEach((O=>(0,YN.overrideInlineStyle)(O,BS,JB,Kg))),nn(document)}let sk=0;const j=new Set;function ED(O){const Xc=++sk;function BV(){if(!(0,xo.isDOMReady)()||!(0,wd.documentIsVisible)()){j.add(Xc),(0,kA.logInfo)(`Current amount of styles loading: ${j.size}`);const O=document.querySelector(ul.STYLESHEET_FALLBACK_SELECTOR);O.textContent||(O.textContent=(0,rE.getModifiedFallbackStyle)(BS,{strict:!1}))}}function YN(){j.delete(Xc),(0,kA.logInfo)(`Removed loadingStyle ${Xc}, now awaiting: ${j.size}`),(0,kA.logInfo)(`To-do to be loaded`,j),0===j.size&&(0,xo.isDOMReady)()&&Qk()}function GC(){const O=ZB.details({secondRound:!0});O&&(nx.variablesStore.addRulesForMatching(O.rules),nx.variablesStore.matchVariablesAndDependants(),ZB.render(BS,Kg))}(0,kA.logInfo)(`New manager for element, with loadingStyleID ${Xc}`,O);const ZB=(0,nz.manageStyle)(O,{update:GC,loadingStart:BV,loadingEnd:YN});return KJ.set(O,ZB),ZB}function xc(O){const Xc=KJ.get(O);Xc&&(Xc.destroy(),KJ.delete(O))}const OD=(0,qr.throttle)((O=>{KJ.forEach((O=>O.render(BS,Kg))),tZ.forEach((O=>O.render(BS,Kg))),O&&O()})),Xd=function(){OD.cancel()};function Th(){0!==j.size?(0,kA.logWarn)(`DOM is ready, but still have styles being loaded.`,j):Qk()}function Ww(){RR(),bk()}function Zr(){FE(),(0,wd.documentIsVisible)()||BS.immediateModify?Ww():(0,wd.setDocumentVisibilityListener)(Ww),(0,GC.changeMetaThemeColorWhenAvailable)(BS)}function nn(O){try{if(Array.isArray(O.adoptedStyleSheets)&&O.adoptedStyleSheets.length>0){const Xc=(0,yS.createAdoptedStyleSheetOverride)(O);tZ.push(Xc),Xc.render(BS,Kg)}}catch(O){(0,kA.logWarn)("Error occurred in handleAdoptedStyleSheets: ",O)}}function bk(){const O=Array.from(KJ.keys());(0,ZB.watchForStyleChanges)(O,(({created:O,updated:Xc,removed:BV,moved:YN})=>{const GC=BV,rE=O.concat(Xc).concat(YN).filter((O=>!KJ.has(O))),nz=YN.filter((O=>KJ.has(O)));(0,kA.logInfo)(`Styles to be removed:`,GC),GC.forEach((O=>xc(O)));const ZB=rE.map((O=>ED(O)));ZB.map((O=>O.details({secondRound:!1}))).filter((O=>O&&O.rules.length>0)).forEach((O=>{nx.variablesStore.addRulesForMatching(O.rules)})),nx.variablesStore.matchVariablesAndDependants(),ZB.forEach((O=>O.render(BS,Kg))),ZB.forEach((O=>O.watch())),nz.forEach((O=>KJ.get(O).restore()))}),(O=>{Lr(O),nn(O)})),(0,YN.watchForInlineStyles)((O=>{if((0,YN.overrideInlineStyle)(O,BS,JB,Kg),O===document.documentElement){const Xc=undefined;if((O.getAttribute("style")||"").includes("--")){nx.variablesStore.matchVariablesAndDependants();const O=nQ(ul.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));nx.variablesStore.putRootVars(O,BS)}}}),(O=>{Lr(O);const Xc=O.querySelectorAll(YN.INLINE_STYLE_SELECTOR);Xc.length>0&&(0,cD.forEach)(Xc,(O=>(0,YN.overrideInlineStyle)(O,BS,JB,Kg)))})),(0,xo.addDOMReadyListener)(Th)}function Jy(){KJ.forEach((O=>O.pause())),nq(),(0,ZB.stopWatchingForStyleChanges)(),(0,YN.stopWatchingForInlineStyles)(),(0,xo.removeDOMReadyListener)(Th),(0,xo.cleanReadyStateCompleteListeners)()}let qZ;function Rg(){const O=document.createElement("meta");O.name=ul.META_PROPERTY,O.content=DT,document.head.appendChild(O)}function YB(){const O=document.querySelector(`meta[name="${ul.META_PROPERTY}"]`);return O?O.content!==DT:(Rg(),!1)}function ZT(O,Xc){if(!Xc)return null;if(0===Xc.length||"*"!==Xc[0].url[0])return(0,kA.logWarn)("selectRelevantFix() failed to construct a single fix",O,Xc),null;const BV=(0,Lg.findRelevantFix)(O,Xc);return BV?(0,Lg.combineFixes)([Xc[0],Xc[BV]]):Xc[0]}function fO(O,Xc,BV){const YN=undefined;BL(O,ZT(document.location.href,Xc),BV)}function BL(O,Xc,BV){if(BS=O,Ge=Xc,Ge?(Kg=Array.isArray(Ge.ignoreImageAnalysis)?Ge.ignoreImageAnalysis:[],JB=Array.isArray(Ge.ignoreInlineStyle)?Ge.ignoreInlineStyle:[]):(Kg=[],JB=[]),BS.immediateModify&&(0,xo.setIsDOMReady)((()=>!0)),sg=BV,document.head){if(YB())return void ow();Zr()}else{if(!bx.isFirefox){const O=nQ(ul.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(O),O.textContent=(0,rE.getModifiedFallbackStyle)(BS,{strict:!0})}const O=new MutationObserver((()=>{if(document.head){if(O.disconnect(),YB())return void ow();Zr()}}));O.observe(document,{childList:!0,subtree:!0})}}function Rw(){document.dispatchEvent(new CustomEvent(ul.MSG_CLEANUP)),(0,xo.removeNode)(document.head.querySelector(ul.PROXY_SELECTOR))}function ow(){qx(),(0,xo.removeNode)(document.querySelector(ul.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,GC.restoreMetaThemeColor)(),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_USER_AGENT_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_TEXT_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_INVERT_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_INLINE_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_OVERRIDE_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_VARIABLES_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(ul.STYLESHEET_ROOT_VARS_SELECTOR)),(0,xo.removeNode)(document.head.querySelector(`meta[name="${ul.META_PROPERTY}"]`)),Rw()),Kq.forEach((O=>{(0,xo.removeNode)(O.querySelector(ul.STYLESHEET_INLINE_SELECTOR)),(0,xo.removeNode)(O.querySelector(ul.STYLESHEET_OVERRIDE_SELECTOR))})),Kq.clear(),(0,cD.forEach)(KJ.keys(),(O=>xc(O))),j.clear(),(0,nz.cleanLoadingLinks)(),(0,cD.forEach)(document.querySelectorAll("."+ul.STYLESHEET_COMMON_CLASSNAME),xo.removeNode),tZ.forEach((O=>{O.destroy()})),tZ.splice(0),qZ&&qZ.disconnect()}function qx(){nx.variablesStore.clear(),UK.parsedURLCache.clear(),(0,wd.removeDocumentVisibilityListener)(),Xd(),Jy(),(0,rE.cleanModificationCache)(),(0,CP.clearColorCache)()}BV.createOrUpdateDynamicTheme=fO,BV.createOrUpdateDynamicThemeInternal=BL,BV.removeDynamicTheme=ow,BV.cleanDynamicThemeCache=qx},{"../../const":1,"../../generators/css-filter":21,"../../generators/modify-colors":22,"../../generators/text-style":24,"../../utils/array":30,"../../utils/color":33,"../../utils/math":36,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/uid":44,"../../utils/url":45,"../../utils/visibility":46,"../utils/dom":18,"../utils/log":19,"./adopted-style-manger":3,"./fixes":5,"./inline-style":8,"./meta-theme-color":9,"./modify-css":10,"./mv3-proxy":11,"./style-manager":13,"./variables":16,"./watch":17}],8:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.overrideInlineStyle=BV.stopWatchingForInlineStyles=BV.watchForInlineStyles=BV.getInlineOverrideStyle=BV.INLINE_STYLE_SELECTOR=void 0;const YN=O("../../utils/array"),GC=O("../utils/dom"),rE=O("./css-rules"),nz=O("./modify-css"),ZB=O("./variables"),cD=O("../../utils/platform"),xo=O("../../utils/time"),kA=O("../../utils/throttle"),qr=O("../../const"),b={"background-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${qr.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${qr.ROOT_VARS_PREFIX}-inline-stopcolor`}},TK=Object.values(b),tA={};TK.forEach((({cssProp:O,customProp:Xc})=>tA[Xc]=O));const mb=["style","fill","stop-color","stroke","bgcolor","color"];function Jw(){return TK.map((({dataAttr:O,customProp:Xc,cssProp:BV})=>[`[${O}] {`,`  ${BV}: var(${Xc}) !important;`,"}"].join("\n"))).join("\n")}function yS(O){const Xc=[];return O instanceof Element&&O.matches(BV.INLINE_STYLE_SELECTOR)&&Xc.push(O),(O instanceof Element||cD.isShadowDomSupported&&O instanceof ShadowRoot||O instanceof Document)&&(0,YN.push)(Xc,O.querySelectorAll(BV.INLINE_STYLE_SELECTOR)),Xc}BV.INLINE_STYLE_SELECTOR=mb.map((O=>`[${O}]`)).join(", "),BV.getInlineOverrideStyle=Jw;const bx=new Map,CP=new Map;function UK(O,Xc){nx(document,O,Xc),(0,GC.iterateShadowHosts)(document.documentElement,(BV=>{nx(BV.shadowRoot,O,Xc)}))}function nx(O,Xc,BV){bx.has(O)&&(bx.get(O).disconnect(),CP.get(O).disconnect());const YN=new WeakSet;function rE(O){yS(O).forEach((O=>{YN.has(O)||(YN.add(O),Xc(O))})),(0,GC.iterateShadowHosts)(O,(GC=>{YN.has(O)||(YN.add(O),BV(GC.shadowRoot),nx(GC.shadowRoot,Xc,BV))}))}const nz=(0,GC.createOptimizedTreeObserver)(O,{onMinorMutations:({additions:O})=>{O.forEach((O=>rE(O)))},onHugeMutations:()=>{rE(O)}});bx.set(O,nz);let ZB=0,cD=null;const qr=(0,xo.getDuration)({seconds:10}),b=(0,xo.getDuration)({seconds:2}),tA=50;let Jw=[],UK=null;const wd=(0,kA.throttle)((O=>{O.forEach((O=>{mb.includes(O.attributeName)&&Xc(O.target)}))})),Lg=new MutationObserver((O=>{if(UK)return void Jw.push(...O);ZB++;const Xc=Date.now();if(null==cD)cD=Xc;else if(ZB>=tA){if(Xc-cD<qr)return UK=setTimeout((()=>{cD=null,ZB=0,UK=null;const O=Jw;Jw=[],wd(O)}),b),void Jw.push(...O);cD=Xc,ZB=1}wd(O)}));Lg.observe(O,{attributes:!0,attributeFilter:mb.concat(TK.map((({dataAttr:O})=>O))),subtree:!0}),CP.set(O,Lg)}function wd(){bx.forEach((O=>O.disconnect())),CP.forEach((O=>O.disconnect())),bx.clear(),CP.clear()}BV.watchForInlineStyles=UK,BV.stopWatchingForInlineStyles=wd;const Lg=new WeakMap,ul=["brightness","contrast","grayscale","sepia","mode"];function eV(O,Xc){return mb.map((Xc=>`${Xc}="${O.getAttribute(Xc)}"`)).concat(ul.map((O=>`${O}="${Xc[O]}"`))).join(" ")}function qe(O,Xc){for(let BV=0,YN=Xc.length;BV<YN;BV++){const YN=Xc[BV];if(O.matches(YN))return!0}return!1}function DT(O,Xc,BV,cD){const xo=undefined;if(eV(O,Xc)===Lg.get(O))return;const kA=new Set(Object.keys(b));function qr(BV,YN,GC){const rE=BV.startsWith("--"),{customProp:xo,dataAttr:qr}=rE?{}:b[BV],TK=(0,nz.getModifiableCSSDeclaration)(YN,GC,{style:O.style},ZB.variablesStore,cD,null);if(!TK)return;let tA=TK.value;if("function"==typeof tA&&(tA=tA(Xc)),rE&&"object"==typeof tA){const Xc=undefined;tA.declarations.forEach((({property:Xc,value:BV})=>{!(BV instanceof Promise)&&O.style.setProperty(Xc,BV)}))}else O.style.setProperty(xo,tA),O.hasAttribute(qr)||O.setAttribute(qr,""),kA.delete(BV)}if(BV.length>0&&qe(O,BV))kA.forEach((Xc=>{O.removeAttribute(b[Xc].dataAttr)}));else{if(O.hasAttribute("bgcolor")){let Xc=O.getAttribute("bgcolor");(Xc.match(/^[0-9a-f]{3}$/i)||Xc.match(/^[0-9a-f]{6}$/i))&&(Xc=`#${Xc}`),qr("background-color","background-color",Xc)}if(O.hasAttribute("color")&&"mask-icon"!==O.rel){let Xc=O.getAttribute("color");(Xc.match(/^[0-9a-f]{3}$/i)||Xc.match(/^[0-9a-f]{6}$/i))&&(Xc=`#${Xc}`),qr("color","color",Xc)}if(O instanceof SVGElement){if(O.hasAttribute("fill")){const Xc=32,BV=O.getAttribute("fill");if("none"!==BV)if(O instanceof SVGTextElement)qr("fill","color",BV);else{const YN=()=>{const{width:YN,height:GC}=O.getBoundingClientRect(),rE=undefined;qr("fill",YN>Xc||GC>Xc?"background-color":"color",BV)};(0,GC.isReadyStateComplete)()?YN():(0,GC.addReadyStateCompleteListener)(YN)}}O.hasAttribute("stop-color")&&qr("stop-color","background-color",O.getAttribute("stop-color"))}if(O.hasAttribute("stroke")){const Xc=O.getAttribute("stroke");qr("stroke",O instanceof SVGLineElement||O instanceof SVGTextElement?"border-color":"color",Xc)}O.style&&(0,rE.iterateCSSDeclarations)(O.style,((Xc,BV)=>{if("background-image"!==Xc||!BV.includes("url"))if(b.hasOwnProperty(Xc)||Xc.startsWith("--")&&!tA[Xc])qr(Xc,Xc,BV);else{const BV=tA[Xc];if(BV&&!O.style.getPropertyValue(BV)&&!O.hasAttribute(BV)){if("background-color"===BV&&O.hasAttribute("bgcolor"))return;O.style.setProperty(Xc,"")}}})),O.style&&O instanceof SVGTextElement&&O.style.fill&&qr("fill","color",O.style.getPropertyValue("fill")),(0,YN.forEach)(kA,(Xc=>{O.removeAttribute(b[Xc].dataAttr)})),Lg.set(O,eV(O,Xc))}}BV.overrideInlineStyle=DT},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/time":43,"../utils/dom":18,"./css-rules":4,"./modify-css":10,"./variables":16}],9:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.restoreMetaThemeColor=BV.changeMetaThemeColorWhenAvailable=void 0;const YN=O("../../utils/color"),GC=O("../../generators/modify-colors"),rE=O("../utils/log"),nz="theme-color",ZB=`meta[name="${nz}"]`;let cD=null,xo=null;function kA(O,Xc){cD=cD||O.content;const BV=(0,YN.parseColorWithCache)(cD);BV?O.content=(0,GC.modifyBackgroundColor)(BV,Xc):(0,rE.logWarn)("Invalid meta color",BV)}function qr(O){const Xc=document.querySelector(ZB);Xc?kA(Xc,O):(xo&&xo.disconnect(),xo=new MutationObserver((Xc=>{O:for(let BV=0;BV<Xc.length;BV++){const{addedNodes:YN}=Xc[BV];for(let Xc=0;Xc<YN.length;Xc++){const BV=YN[Xc];if(BV instanceof HTMLMetaElement&&BV.name===nz){xo.disconnect(),xo=null,kA(BV,O);break O}}}})),xo.observe(document.head,{childList:!0}))}function b(){xo&&(xo.disconnect(),xo=null);const O=document.querySelector(ZB);O&&cD&&(O.content=cD)}BV.changeMetaThemeColorWhenAvailable=qr,BV.restoreMetaThemeColor=b},{"../../generators/modify-colors":22,"../../utils/color":33,"../utils/log":19}],10:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.cleanModificationCache=BV.getShadowModifier=BV.getShadowModifierWithInfo=BV.getBgImageModifier=BV.getModifiedFallbackStyle=BV.getSelectionColor=BV.getModifiedUserAgentStyle=BV.getModifiableCSSDeclaration=void 0;const YN=O("../../utils/color"),GC=O("../../utils/math"),rE=O("../../utils/text"),nz=O("../../utils/url"),ZB=O("../../generators/modify-colors"),cD=O("./css-rules"),xo=O("./image"),kA=O("../utils/log"),qr=O("../../utils/platform"),b=O("../../utils/parsing");function TK(O,Xc){return Boolean(O&&O.getPropertyPriority(Xc))}function tA(O,Xc,BV,YN,GC,rE){if(O.startsWith("--")){const nz=tZ(YN,O,Xc,BV,GC,rE);if(nz)return{property:O,value:nz,important:TK(BV.style,O),sourceValue:Xc}}else if(Xc.includes("var(")){const GC=BS(YN,O,Xc);if(GC)return{property:O,value:GC,important:TK(BV.style,O),sourceValue:Xc}}else{if("color-scheme"===O)return(0,kA.logWarn)("CSS property color-scheme is not supported"),null;if(O.includes("color")&&"-webkit-print-color-adjust"!==O||"fill"===O||"stroke"===O||"stop-color"===O){const YN=wd(O,Xc,BV);if(YN)return{property:O,value:YN,important:TK(BV.style,O),sourceValue:Xc}}else if("background-image"===O||"list-style-image"===O){const YN=qe(Xc,BV,GC,rE);if(YN)return{property:O,value:YN,important:TK(BV.style,O),sourceValue:Xc}}else if(O.includes("shadow")){const YN=KJ(Xc);if(YN)return{property:O,value:YN,important:TK(BV.style,O),sourceValue:Xc}}}return null}function mb(...O){return O.filter(Boolean).join(", ")}function Jw(O,Xc,BV){const YN=[];Xc||(YN.push("html {"),YN.push(`    background-color: ${(0,ZB.modifyBackgroundColor)({r:255,g:255,b:255},O)} !important;`),YN.push("}")),YN.push("html {"),YN.push(`    color-scheme: ${1===O.mode?"dark":"dark light"} !important;`),YN.push("}");const GC=mb(Xc?"":"html, body",BV?"input, textarea, select, button, dialog":"");return GC&&(YN.push(`${GC} {`),YN.push(`    background-color: ${(0,ZB.modifyBackgroundColor)({r:255,g:255,b:255},O)};`),YN.push("}")),YN.push(`${mb("html, body",BV?"input, textarea, select, button":"")} {`),YN.push(`    border-color: ${(0,ZB.modifyBorderColor)({r:76,g:76,b:76},O)};`),YN.push(`    color: ${(0,ZB.modifyForegroundColor)({r:0,g:0,b:0},O)};`),YN.push("}"),YN.push("a {"),YN.push(`    color: ${(0,ZB.modifyForegroundColor)({r:0,g:64,b:255},O)};`),YN.push("}"),YN.push("table {"),YN.push(`    border-color: ${(0,ZB.modifyBorderColor)({r:128,g:128,b:128},O)};`),YN.push("}"),YN.push("::placeholder {"),YN.push(`    color: ${(0,ZB.modifyForegroundColor)({r:169,g:169,b:169},O)};`),YN.push("}"),YN.push("input:-webkit-autofill,"),YN.push("textarea:-webkit-autofill,"),YN.push("select:-webkit-autofill {"),YN.push(`    background-color: ${(0,ZB.modifyBackgroundColor)({r:250,g:255,b:189},O)} !important;`),YN.push(`    color: ${(0,ZB.modifyForegroundColor)({r:0,g:0,b:0},O)} !important;`),YN.push("}"),O.scrollbarColor&&YN.push(CP(O)),O.selectionColor&&YN.push(bx(O)),YN.join("\n")}function yS(O){let Xc,BV;if("auto"===O.selectionColor)Xc=(0,ZB.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},O),{grayscale:0})),BV=(0,ZB.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},O),{grayscale:0}));else{const GC=(0,YN.parseColorWithCache)(O.selectionColor),rE=(0,YN.rgbToHSL)(GC);Xc=O.selectionColor,BV=rE.l<.5?"#FFF":"#000"}return{backgroundColorSelection:Xc,foregroundColorSelection:BV}}function bx(O){const Xc=[],BV=yS(O),YN=BV.backgroundColorSelection,GC=BV.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((O=>{Xc.push(`${O} {`),Xc.push(`    background-color: ${YN} !important;`),Xc.push(`    color: ${GC} !important;`),Xc.push("}")})),Xc.join("\n")}function CP(O){const Xc=[];let BV,rE,nz,cD,xo,kA;if("auto"===O.scrollbarColor)BV=(0,ZB.modifyBackgroundColor)({r:241,g:241,b:241},O),rE=(0,ZB.modifyForegroundColor)({r:96,g:96,b:96},O),nz=(0,ZB.modifyBackgroundColor)({r:176,g:176,b:176},O),cD=(0,ZB.modifyBackgroundColor)({r:144,g:144,b:144},O),xo=(0,ZB.modifyBackgroundColor)({r:96,g:96,b:96},O),kA=(0,ZB.modifyBackgroundColor)({r:255,g:255,b:255},O);else{const Xc=(0,YN.parseColorWithCache)(O.scrollbarColor),ZB=(0,YN.rgbToHSL)(Xc),kA=ZB.l>.5,qr=O=>Object.assign(Object.assign({},ZB),{l:(0,GC.clamp)(ZB.l+O,0,1)}),b=O=>Object.assign(Object.assign({},ZB),{l:(0,GC.clamp)(ZB.l-O,0,1)});BV=(0,YN.hslToString)(b(.4)),rE=(0,YN.hslToString)(kA?b(.4):qr(.4)),nz=(0,YN.hslToString)(ZB),cD=(0,YN.hslToString)(qr(.1)),xo=(0,YN.hslToString)(qr(.2))}return Xc.push("::-webkit-scrollbar {"),Xc.push(`    background-color: ${BV};`),Xc.push(`    color: ${rE};`),Xc.push("}"),Xc.push("::-webkit-scrollbar-thumb {"),Xc.push(`    background-color: ${nz};`),Xc.push("}"),Xc.push("::-webkit-scrollbar-thumb:hover {"),Xc.push(`    background-color: ${cD};`),Xc.push("}"),Xc.push("::-webkit-scrollbar-thumb:active {"),Xc.push(`    background-color: ${xo};`),Xc.push("}"),Xc.push("::-webkit-scrollbar-corner {"),Xc.push(`    background-color: ${kA};`),Xc.push("}"),qr.isFirefox&&(Xc.push("* {"),Xc.push(`    scrollbar-color: ${nz} ${BV};`),Xc.push("}")),Xc.join("\n")}function UK(O,{strict:Xc}){const BV=[],YN=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return BV.push(`html, body, ${Xc?`body :not(iframe)${YN?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),BV.push(`    background-color: ${(0,ZB.modifyBackgroundColor)({r:255,g:255,b:255},O)} !important;`),BV.push(`    border-color: ${(0,ZB.modifyBorderColor)({r:64,g:64,b:64},O)} !important;`),BV.push(`    color: ${(0,ZB.modifyForegroundColor)({r:0,g:0,b:0},O)} !important;`),BV.push("}"),BV.join("\n")}BV.getModifiableCSSDeclaration=tA,BV.getModifiedUserAgentStyle=Jw,BV.getSelectionColor=yS,BV.getModifiedFallbackStyle=UK;const nx=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function wd(O,Xc,BV){if(nx.has(Xc.toLowerCase()))return Xc;const GC=(0,YN.parseColorWithCache)(Xc);return GC?O.includes("background")?BV.style.webkitMaskImage&&"none"!==BV.style.webkitMaskImage||BV.style.webkitMask&&!BV.style.webkitMask.startsWith("none")||BV.style.mask&&"none"!==BV.style.mask||BV.style.getPropertyValue("mask-image")&&"none"!==BV.style.getPropertyValue("mask-image")?O=>(0,ZB.modifyForegroundColor)(GC,O):O=>(0,ZB.modifyBackgroundColor)(GC,O):O.includes("border")||O.includes("outline")?O=>(0,ZB.modifyBorderColor)(GC,O):O=>(0,ZB.modifyForegroundColor)(GC,O):((0,kA.logWarn)("Couldn't parse color",Xc),null)}const Lg=new Map,ul=new Map;function eV(O,Xc){if(!O||0===Xc.length)return!1;if(Xc.some((O=>"*"===O)))return!0;const BV=O.split(/,\s*/g);for(let O=0;O<Xc.length;O++){const YN=Xc[O];if(BV.some((O=>O===YN)))return!0}return!1}function qe(O,Xc,BV,qr){try{const TK=(0,b.parseGradient)(O),tA=(0,rE.getMatches)(cD.cssURLRegex,O);if(0===tA.length&&0===TK.length)return O;const mb=Xc=>{let BV=0;return Xc.map((Xc=>{const YN=O.indexOf(Xc,BV);return BV=YN+Xc.length,{match:Xc,index:YN}}))},Jw=TK.map((O=>Object.assign({type:"gradient"},O))).concat(mb(tA).map((O=>Object.assign({type:"url",offset:0},O)))).sort(((O,Xc)=>O.index>Xc.index?1:-1)),yS=O=>{const{typeGradient:Xc,match:BV,hasComma:GC}=O,nz=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,cD=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,xo=(0,rE.getMatches)(nz,BV,1).map((O=>{O=O.trim();let Xc=(0,YN.parseColorWithCache)(O);if(Xc)return O=>(0,ZB.modifyGradientColor)(Xc,O);const BV=O.lastIndexOf(" ");if(Xc=(0,YN.parseColorWithCache)(O.substring(0,BV)),Xc)return YN=>`${(0,ZB.modifyGradientColor)(Xc,YN)} ${O.substring(BV+1)}`;const GC=O.match(cD);return GC&&(Xc=(0,YN.parseColorWithCache)(GC[3]),Xc)?O=>`${GC[1]}(${GC[2]?`${GC[2]}, `:""}${(0,ZB.modifyGradientColor)(Xc,O)})`:()=>O}));return O=>`${Xc}(${xo.map((Xc=>Xc(O))).join(", ")})${GC?", ":""}`},bx=O=>{var YN;if(eV(Xc.selectorText,BV))return null;let GC=(0,cD.getCSSURLValue)(O);const rE=0===GC.length,{parentStyleSheet:ZB}=Xc,b=ZB&&ZB.href?(0,cD.getCSSBaseBath)(ZB.href):(null===(YN=ZB.ownerNode)||void 0===YN?void 0:YN.baseURI)||location.origin;GC=(0,nz.getAbsoluteURL)(b,GC);const TK=`url("${GC}")`;return async O=>{if(rE)return"url('')";let Xc;if(Lg.has(GC))Xc=Lg.get(GC);else try{if(ul.has(GC)){const O=ul.get(GC);if(Xc=await new Promise((Xc=>O.push(Xc))),!Xc)return null}else ul.set(GC,[]),Xc=await(0,xo.getImageDetails)(GC),Lg.set(GC,Xc),ul.get(GC).forEach((O=>O(Xc))),ul.delete(GC);if(qr())return null}catch(O){return(0,kA.logWarn)(O),ul.has(GC)&&(ul.get(GC).forEach((O=>O(null))),ul.delete(GC)),TK}const BV=undefined;return CP(Xc,O)||TK}},CP=(O,Xc)=>{const{isDark:BV,isLight:YN,isTransparent:rE,isLarge:nz,isTooLarge:ZB,width:cD}=O;let qr;if(ZB)(0,kA.logInfo)(`Not modifying too large image ${O.src}`),qr=`url("${O.src}")`;else if(BV&&rE&&1===Xc.mode&&!nz&&cD>2){(0,kA.logInfo)(`Inverting dark image ${O.src}`);const BV=undefined;qr=`url("${(0,xo.getFilteredImageDataURL)(O,Object.assign(Object.assign({},Xc),{sepia:(0,GC.clamp)(Xc.sepia+10,0,100)}))}")`}else if(YN&&!rE&&1===Xc.mode)if(nz)(0,kA.logInfo)(`Not modifying light non-transparent large image ${O.src}`),qr="none";else{(0,kA.logInfo)(`Dimming light image ${O.src}`);const BV=undefined;qr=`url("${(0,xo.getFilteredImageDataURL)(O,Xc)}")`}else if(0===Xc.mode&&YN&&!nz){(0,kA.logInfo)(`Applying filter to image ${O.src}`);const BV=undefined;qr=`url("${(0,xo.getFilteredImageDataURL)(O,Object.assign(Object.assign({},Xc),{brightness:(0,GC.clamp)(Xc.brightness-10,5,200),sepia:(0,GC.clamp)(Xc.sepia+10,0,100)}))}")`}else(0,kA.logInfo)(`Not modifying too large image ${O.src}`),qr=null;return qr},UK=[];let nx=0,wd=!1;return Jw.forEach((({type:Xc,match:BV,index:YN,typeGradient:GC,hasComma:rE,offset:nz},ZB)=>{const cD=YN,xo=nx,kA=cD+BV.length+nz;nx=kA,xo!==cD&&(wd?UK.push((()=>{let Xc=O.substring(xo,cD);return","===Xc[0]&&(Xc=Xc.substring(1)),Xc})):UK.push((()=>O.substring(xo,cD)))),wd=rE||!1,"url"===Xc?UK.push(bx(BV)):"gradient"===Xc&&UK.push(yS({match:BV,index:YN,typeGradient:GC,hasComma:rE||!1,offset:nz})),ZB===Jw.length-1&&UK.push((()=>O.substring(kA)))})),O=>{const Xc=UK.filter(Boolean).map((Xc=>Xc(O)));if(Xc.some((O=>O instanceof Promise)))return Promise.all(Xc).then((O=>O.filter(Boolean).join("")));const BV=Xc.join("");return BV.endsWith(", initial")?BV.slice(0,-9):BV}}catch(Xc){return(0,kA.logWarn)(`Unable to parse gradient ${O}`,Xc),null}}function DT(O){try{let Xc=0;const BV=(0,rE.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,O,2);let GC=0;const nz=BV.map(((rE,nz)=>{const cD=Xc,xo=O.indexOf(rE,Xc),kA=xo+rE.length;Xc=kA;const qr=(0,YN.parseColorWithCache)(rE);return qr?Xc=>`${O.substring(cD,xo)}${(0,ZB.modifyShadowColor)(qr,Xc)}${nz===BV.length-1?O.substring(kA):""}`:(GC++,()=>O.substring(cD,kA))}));return O=>{const Xc=nz.map((Xc=>Xc(O))).join("");return{matchesLength:BV.length,unparseableMatchesLength:GC,result:Xc}}}catch(Xc){return(0,kA.logWarn)(`Unable to parse shadow ${O}`,Xc),null}}function KJ(O){const Xc=DT(O);return Xc?O=>Xc(O).result:null}function tZ(O,Xc,BV,YN,GC,rE){return O.getModifierForVariable({varName:Xc,sourceValue:BV,rule:YN,ignoredImgSelectors:GC,isCancelled:rE})}function BS(O,Xc,BV){return O.getModifierForVarDependant(Xc,BV)}function Ge(){(0,ZB.clearColorModificationCache)(),Lg.clear(),(0,xo.cleanImageProcessingCache)(),ul.clear()}BV.getBgImageModifier=qe,BV.getShadowModifierWithInfo=DT,BV.getShadowModifier=KJ,BV.cleanModificationCache=Ge},{"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/math":36,"../../utils/parsing":39,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/log":19,"./css-rules":4,"./image":6}],11:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.EVENT_ARG=void 0;const YN=O("./stylesheet-proxy"),GC=O("../utils/log"),rE=O("../../const");document.currentScript&&document.currentScript.remove();const nz=`${rE.MISC_PREFIX}ProxyInjected`,ZB=`${rE.EVENT_PREFIX}stylesheetProxy__done`;BV.EVENT_ARG=`${rE.EVENT_PREFIX}stylesheetProxy__arg`;const cD=!document.currentScript;function xo(O){(0,YN.injectProxy)(O),b(),document.dispatchEvent(new CustomEvent(ZB))}function kA(){const O=document.currentScript.dataset.arg;if(void 0!==O){document.documentElement.dataset[nz]="true";const Xc=JSON.parse(O);(0,GC.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${Xc}).`),xo(Xc)}}function qr(O){document.removeEventListener(BV.EVENT_ARG,qr),void 0===document.documentElement.dataset[nz]?(document.documentElement.dataset[nz]="true",(0,GC.logInfo)(`MV3 proxy injector: ${cD?"registerd":"dedicated"} path runs injectProxy(${O.detail}).`),xo(O.detail)):(0,GC.logInfo)(`MV3 proxy injector: ${cD?"registerd":"dedicated"} path exits because everything is done.`)}function b(){document.removeEventListener(BV.EVENT_ARG,qr),document.removeEventListener(ZB,b)}function TK(){(0,GC.logInfo)(`MV3 proxy injector: ${cD?"registerd":"dedicated"} path setup...`),document.addEventListener(BV.EVENT_ARG,qr),document.addEventListener(ZB,b)}function tA(){void 0===document.documentElement.dataset[nz]?((0,GC.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&kA(),TK()):(0,GC.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}tA()},{"../../const":1,"../utils/log":19,"./stylesheet-proxy":15}],12:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.bgFetch=void 0;const YN=O("../../utils/message");let GC=0;const rE=new Map,nz=new Map;async function ZB(O){return new Promise(((Xc,BV)=>{const ZB=++GC;rE.set(ZB,Xc),nz.set(ZB,BV),chrome.runtime.sendMessage({type:YN.MessageType.CS_FETCH,data:O,id:ZB})}))}BV.bgFetch=ZB,chrome.runtime.onMessage.addListener((({type:O,data:Xc,error:BV,id:GC})=>{if(O===YN.MessageType.BG_FETCH_RESPONSE){const O=rE.get(GC),YN=nz.get(GC);rE.delete(GC),nz.delete(GC),BV?YN&&YN(BV):O&&O(Xc)}}))},{"../../utils/message":37}],13:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.manageStyle=BV.cleanLoadingLinks=BV.getManageableStyles=BV.shouldManageStyle=BV.STYLE_SELECTOR=void 0;const YN=O("../../utils/array"),GC=O("../../utils/text"),rE=O("../../utils/url"),nz=O("../utils/dom"),ZB=O("../utils/log"),cD=O("./css-rules"),xo=O("./network"),kA=O("./stylesheet-modifier"),qr=O("../../utils/platform"),b=O("../../const"),TK=!1;function tA(O){if(!O.href)return!1;try{const Xc=undefined;return"fonts.googleapis.com"===new URL(O.href).hostname}catch(Xc){return(0,ZB.logInfo)(`Couldn't construct ${O.href} as URL`),!1}}function mb(O){return(O instanceof HTMLStyleElement||O instanceof SVGStyleElement||O instanceof HTMLLinkElement&&Boolean(O.rel)&&O.rel.toLowerCase().includes("stylesheet")&&Boolean(O.href)&&!O.disabled&&(!qr.isFirefox||!O.href.startsWith("moz-extension://"))&&!tA(O))&&!O.classList.contains(b.STYLESHEET_COMMON_CLASSNAME)&&"print"!==O.media.toLowerCase()&&!O.classList.contains("stylus")}function Jw(O,Xc=[],GC=!0){return mb(O)?Xc.push(O):(O instanceof Element||qr.isShadowDomSupported&&O instanceof ShadowRoot||O===document)&&((0,YN.forEach)(O.querySelectorAll(BV.STYLE_SELECTOR),(O=>Jw(O,Xc,!1))),GC&&(0,nz.iterateShadowHosts)(O,(O=>Jw(O.shadowRoot,Xc,!1)))),Xc}BV.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',BV.shouldManageStyle=mb,BV.getManageableStyles=Jw;const yS=new WeakSet,bx=new WeakSet;let CP=!1;document.addEventListener(`${b.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{CP=!0}));let UK=0;const nx=new Map;function wd(){nx.clear()}function Lg(O,{update:Xc,loadingStart:BV,loadingEnd:YN}){const GC=[];let xo=O;for(;(xo=xo.nextElementSibling)&&xo.matches(`.${b.STYLESHEET_COMMON_CLASSNAME}`);)GC.push(xo);let tA=GC.find((O=>O.matches(b.STYLESHEET_CORS_SELECTOR)&&!bx.has(O)))||null,mb=GC.find((O=>O.matches(b.STYLESHEET_SYNC_SELECTOR)&&!yS.has(O)))||null,Jw=null,wd=null,Lg=!1,eV=!0;const tZ=(0,kA.createStyleSheetModifier)(),BS=new MutationObserver((()=>{Xc()})),Ge={attributes:!0,childList:!0,subtree:!0,characterData:!0};function sg(){return O instanceof HTMLStyleElement&&O.textContent.trim().match(cD.cssImportRegex)}function Kg(O,Xc){let BV=!1;if(O){let YN;O:for(let GC=0,rE=O.length;GC<rE;GC++)if(YN=O[GC],YN.href){if(!Xc){BV=!0;break O}if(!YN.href.startsWith("https://fonts.googleapis.com/")&&YN.href.startsWith("http")&&!YN.href.startsWith(location.origin)){BV=!0;break O}}}return BV}function JB(){if(tA)return(0,ZB.logInfo)("[getRulesSync] Using cors-copy."),tA.sheet.cssRules;if(sg())return(0,ZB.logInfo)("[getRulesSync] CSSImport detected."),null;const Xc=sk();return O instanceof HTMLLinkElement&&!(0,rE.isRelativeHrefOnAbsolutePath)(O.href)&&Kg(Xc,!1)?((0,ZB.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):Kg(Xc,!0)?((0,ZB.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,ZB.logInfo)("[getRulesSync] Using cssRules."),!Xc&&(0,ZB.logWarn)("[getRulesSync] cssRules is null, trying again."),Xc)}function nQ(){tA?(O.nextSibling!==tA&&O.parentNode.insertBefore(tA,O.nextSibling),tA.nextSibling!==mb&&O.parentNode.insertBefore(mb,tA.nextSibling)):O.nextSibling!==mb&&O.parentNode.insertBefore(mb,O.nextSibling)}function FT(){mb=O instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),mb.classList.add(b.STYLESHEET_COMMON_CLASSNAME),mb.classList.add(b.STYLESHEET_SYNC_SELECTOR.substring(1)),mb.media="screen",O.title&&(mb.title=O.title),yS.add(mb)}let Hm=!1,Li=!1;const nq=++UK;async function FE(){let Xc,BV;if(O instanceof HTMLLinkElement){let[YN,GC]=Qk();if(GC&&(0,ZB.logWarn)(GC),!YN&&!GC&&!qr.isSafari||qr.isSafari&&!O.sheet||RR(GC)){try{(0,ZB.logInfo)(`Linkelement ${nq} is not loaded yet and thus will be await for`,O),await ul(O,nq)}catch(O){(0,ZB.logWarn)(O),Li=!0}if(Lg)return null;[YN,GC]=Qk(),GC&&(0,ZB.logWarn)(GC)}if(YN&&!Kg(YN,!1))return YN;if(Xc=await qe(O.href),BV=(0,cD.getCSSBaseBath)(O.href),Lg)return null}else{if(!sg())return null;Xc=O.textContent.trim(),BV=(0,cD.getCSSBaseBath)(location.href)}if(Xc){try{const YN=await DT(Xc,BV);tA=KJ(O,YN)}catch(O){(0,ZB.logWarn)(O)}if(tA)return Jw=(0,nz.watchForNodePosition)(tA,"prev-sibling"),tA.sheet.cssRules}return null}function Kq(O){const GC=JB();return GC?{rules:GC}:O.secondRound?((0,ZB.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(Hm||Li||(Hm=!0,BV(),FE().then((O=>{Hm=!1,YN(),O&&Xc()})).catch((O=>{(0,ZB.logWarn)(O),Hm=!1,YN()}))),null)}let Lr=!1;function qQ(O,BV){const YN=JB();function GC(O){if(O)for(let Xc=O.cssRules.length-1;Xc>=0;Xc--)O.deleteRule(Xc)}function rE(){mb||FT(),wd&&wd.stop(),nQ(),null==mb.sheet&&(mb.textContent="");const O=undefined;return GC(mb.sheet),wd?wd.run():wd=(0,nz.watchForNodePosition)(mb,"prev-sibling",(()=>{Lr=!0,ZB()})),mb.sheet}function ZB(){const GC=Lr;Lr=!1,tZ.modifySheet({prepareSheet:rE,sourceCSSRules:YN,theme:O,ignoreImageAnalysis:BV,force:GC,isAsyncCancelled:()=>Lg}),eV=0===mb.sheet.cssRules.length,tZ.shouldRebuildStyle()&&(0,nz.addReadyStateCompleteListener)((()=>Xc()))}YN&&(Lg=!1,ZB())}function Qk(){try{return null==O.sheet?[null,null]:[O.sheet.cssRules,null]}catch(O){return[null,O]}}function RR(O){return O&&O.message&&O.message.includes("loading")}function sk(){const[O,Xc]=Qk();return Xc?((0,ZB.logWarn)(Xc),null):O}function j(){bk(),TK||CP&&O.sheet||Th()}let ED=null,xc=null;function OD(){const O=sk();return O?O.length:null}function Xd(){return OD()!==ED}function Th(){ED=OD(),Ww();const BV=()=>{Xd()&&(ED=OD(),Xc()),CP&&O.sheet?Ww():xc=requestAnimationFrame(BV)};BV()}function Ww(){cancelAnimationFrame(xc)}let Zr=!1;function nn(){function O(){Zr=!1,Lg||Xc()}CP=!0,Ww(),Zr||(Zr=!0,"function"==typeof queueMicrotask?queueMicrotask(O):requestAnimationFrame(O))}function bk(){O.addEventListener(`${b.EVENT_PREFIX}updateSheet`,nn)}function Jy(){O.removeEventListener(`${b.EVENT_PREFIX}updateSheet`,nn)}function qZ(){Jy(),Ww()}function Rg(){BS.disconnect(),Lg=!0,Jw&&Jw.stop(),wd&&wd.stop(),qZ()}function YB(){if(Rg(),(0,nz.removeNode)(tA),(0,nz.removeNode)(mb),YN(),nx.has(nq)){const O=nx.get(nq);nx.delete(nq),O&&O()}}function ZT(){BS.observe(O,Ge),O instanceof HTMLStyleElement&&j()}const fO=10;let BL=0;function Rw(){mb&&(BL++,BL>fO?(0,ZB.logWarn)("Style sheet was moved multiple times",O):((0,ZB.logWarn)("Restore style",mb,O),nQ(),Jw&&Jw.skip(),wd&&wd.skip(),eV||(Lr=!0,Xc())))}return{details:Kq,render:qQ,pause:Rg,destroy:YB,watch:ZT,restore:Rw}}async function ul(O,Xc){return new Promise(((BV,YN)=>{const GC=()=>{O.removeEventListener("load",rE),O.removeEventListener("error",nz),nx.delete(Xc)},rE=()=>{GC(),(0,ZB.logInfo)(`Linkelement ${Xc} has been loaded`),BV()},nz=()=>{GC(),YN(`Linkelement ${Xc} couldn't be loaded. ${O.href}`)};nx.set(Xc,(()=>{GC(),YN()})),O.addEventListener("load",rE),O.addEventListener("error",nz),O.href||nz()}))}function eV(O){return(0,cD.getCSSURLValue)(O.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function qe(O){return O.startsWith("data:")?await(await fetch(O)).text():await(0,xo.bgFetch)({url:O,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function DT(O,Xc,BV=new Map){O=(0,cD.removeCSSComments)(O),O=(0,cD.replaceCSSFontFace)(O),O=(0,cD.replaceCSSRelativeURLsWithAbsolute)(O,Xc);const YN=(0,GC.getMatches)(cD.cssImportRegex,O);for(const GC of YN){const YN=eV(GC),nz=(0,rE.getAbsoluteURL)(Xc,YN);let xo;if(BV.has(nz))xo=BV.get(nz);else try{xo=await qe(nz),BV.set(nz,xo),xo=await DT(xo,(0,cD.getCSSBaseBath)(nz),BV)}catch(O){(0,ZB.logWarn)(O),xo=""}O=O.split(GC).join(xo)}return O=O.trim()}function KJ(O,Xc){if(!Xc)return null;const BV=document.createElement("style");return BV.classList.add(b.STYLESHEET_COMMON_CLASSNAME),BV.classList.add(b.STYLESHEET_CORS_SELECTOR.substring(1)),BV.media="screen",BV.textContent=Xc,O.parentNode.insertBefore(BV,O.nextSibling),BV.sheet.disabled=!0,bx.add(BV),BV}BV.cleanLoadingLinks=wd,BV.manageStyle=Lg},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/dom":18,"../utils/log":19,"./css-rules":4,"./network":12,"./stylesheet-modifier":14}],14:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.createStyleSheetModifier=void 0;const YN=O("../../utils/throttle"),GC=O("./css-rules"),rE=O("./modify-css"),nz=O("./variables"),ZB=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function cD(O){let Xc="";return ZB.forEach((BV=>{Xc+=`${BV}:${O[BV]};`})),Xc}const xo=(0,YN.createAsyncTasksQueue)();function kA(){let O=0;const Xc=new Set,BV=new Map,YN=new Set;let ZB=null,kA=!1,qr=!1;function b(){return kA&&!qr}function TK(b){const TK=b.sourceCSSRules,{theme:tA,ignoreImageAnalysis:mb,force:Jw,prepareSheet:yS,isAsyncCancelled:bx}=b;let CP=0===BV.size;const UK=new Set(BV.keys()),nx=cD(tA),wd=nx!==ZB;kA&&(qr=!0);const Lg=[];if((0,GC.iterateCSSRules)(TK,(O=>{let YN=O.cssText,ZB=!1;if(UK.delete(YN),O.parentRule instanceof CSSMediaRule&&(YN+=`;${O.parentRule.media.mediaText}`),Xc.has(YN)||(Xc.add(YN),ZB=!0),!ZB)return void Lg.push(BV.get(YN));if(CP=!0,"revert"===O.style.all)return;const cD=[];O.style&&(0,GC.iterateCSSDeclarations)(O.style,((Xc,BV)=>{const YN=(0,rE.getModifiableCSSDeclaration)(Xc,BV,O,nz.variablesStore,mb,bx);YN&&cD.push(YN)}));let xo=null;if(cD.length>0){const Xc=O.parentRule;xo={selector:O.selectorText,declarations:cD,parentRule:Xc},Lg.push(xo)}BV.set(YN,xo)}),(()=>{kA=!0})),UK.forEach((O=>{Xc.delete(O),BV.delete(O)})),ZB=nx,!Jw&&!CP&&!wd)return;function ul(O,Xc,BV){const{selector:YN,declarations:GC}=BV,rE=O=>{const{property:Xc,value:BV,important:YN,sourceValue:GC}=O;return`${Xc}: ${null==BV?GC:BV}${YN?" !important":""};`};let nz="";GC.forEach((O=>{nz+=`${rE(O)} `}));const ZB=`${YN} { ${nz} }`;O.insertRule(ZB,Xc)}O++;const eV=new Map,qe=new Map;let DT=0,KJ=0;const tZ={rule:null,rules:[],isGroup:!0},BS=new WeakMap;function Ge(O){if(null==O)return tZ;if(BS.has(O))return BS.get(O);const Xc={rule:O,rules:[],isGroup:!0};BS.set(O,Xc);const BV=undefined;return Ge(O.parentRule).rules.push(Xc),Xc}YN.forEach((O=>O())),YN.clear(),Lg.filter((O=>O)).forEach((({selector:Xc,declarations:BV,parentRule:GC})=>{const rE=Ge(GC),nz={selector:Xc,declarations:[],isGroup:!1},ZB=nz.declarations;function cD(Xc,BV,YN,GC){const rE=++DT,nz={property:Xc,value:null,important:YN,asyncKey:rE,sourceValue:GC};ZB.push(nz);const cD=O;BV.then((Xc=>{Xc&&!bx()&&cD===O&&(nz.value=Xc,xo.add((()=>{bx()||cD!==O||JB(rE)})))}))}function kA(Xc,BV,GC,rE){const{declarations:nz,onTypeChange:xo}=BV,kA=++KJ,qr=O,b=ZB.length;let TK=[];if(0===nz.length){const O={property:Xc,value:rE,important:GC,sourceValue:rE,varKey:kA};ZB.push(O),TK=[O]}nz.forEach((O=>{if(O.value instanceof Promise)cD(O.property,O.value,GC,rE);else{const Xc={property:O.property,value:O.value,important:GC,sourceValue:rE,varKey:kA};ZB.push(Xc),TK.push(Xc)}})),xo.addListener((Xc=>{if(bx()||qr!==O)return;const BV=Xc.map((O=>({property:O.property,value:O.value,important:GC,sourceValue:rE,varKey:kA}))),YN=ZB.indexOf(TK[0],b);ZB.splice(YN,TK.length,...BV),TK=BV,nQ(kA)})),YN.add((()=>xo.removeListeners()))}rE.rules.push(nz),BV.forEach((({property:O,value:Xc,important:BV,sourceValue:YN})=>{if("function"==typeof Xc){const GC=Xc(tA);GC instanceof Promise?cD(O,GC,BV,YN):O.startsWith("--")?kA(O,GC,BV,YN):ZB.push({property:O,value:GC,important:BV,sourceValue:YN})}else ZB.push({property:O,value:Xc,important:BV,sourceValue:YN})}))}));const sg=yS();function Kg(){function O(O,Xc){const{rule:BV}=O;if(BV instanceof CSSMediaRule){const{media:O}=BV,YN=Xc.cssRules.length;return Xc.insertRule(`@media ${O.mediaText} {}`,YN),Xc.cssRules[YN]}return Xc}function Xc(BV,YN,GC){BV.rules.forEach((BV=>{if(BV.isGroup){const rE=undefined;Xc(BV,O(BV,YN),GC)}else GC(BV,YN)}))}Xc(tZ,sg,((O,Xc)=>{const BV=Xc.cssRules.length;O.declarations.forEach((({asyncKey:YN,varKey:GC})=>{null!=YN&&eV.set(YN,{rule:O,target:Xc,index:BV}),null!=GC&&qe.set(GC,{rule:O,target:Xc,index:BV})})),ul(Xc,BV,O)}))}function JB(O){const{rule:Xc,target:BV,index:YN}=eV.get(O);BV.deleteRule(YN),ul(BV,YN,Xc),eV.delete(O)}function nQ(O){const{rule:Xc,target:BV,index:YN}=qe.get(O);BV.deleteRule(YN),ul(BV,YN,Xc)}Kg()}return{modifySheet:TK,shouldRebuildStyle:b}}BV.createStyleSheetModifier=kA},{"../../utils/throttle":42,"./css-rules":4,"./modify-css":10,"./variables":16}],15:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.injectProxy=void 0;const YN=O("../../const");function GC(O){document.dispatchEvent(new CustomEvent(`${YN.EVENT_PREFIX}inlineScriptsAllowed`));const Xc=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),BV=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),GC=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),rE=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),nz=O?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,ZB=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),cD=ZB?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,xo="www.vy.no"===location.hostname,kA=xo?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,qr=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",Xc),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",BV),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",GC),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",rE),document.removeEventListener(`${YN.EVENT_PREFIX}cleanUp`,qr),document.removeEventListener(`${YN.EVENT_PREFIX}addUndefinedResolver`,b),O&&Object.defineProperty(Document.prototype,"styleSheets",nz),ZB&&Object.defineProperty(Element.prototype,"getElementsByTagName",cD),xo&&Object.defineProperty(Node.prototype,"childNodes",kA)},b=O=>{customElements.whenDefined(O.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${YN.EVENT_PREFIX}isDefined`,{detail:{tag:O.detail.tag}}))}))};document.addEventListener(YN.MSG_CLEANUP,qr),document.addEventListener(`${YN.EVENT_PREFIX}addUndefinedResolver`,b);const TK=new Event(`${YN.EVENT_PREFIX}updateSheet`);function tA(O,BV,GC){return Xc.value.call(this,O,BV,GC),this.ownerNode&&!this.ownerNode.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(TK),-1}function mb(O,Xc){const GC=BV.value.call(this,O,Xc);return this.ownerNode&&!this.ownerNode.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(TK),GC}function Jw(O){GC.value.call(this,O),this.ownerNode&&!this.ownerNode.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(TK)}function yS(O){rE.value.call(this,O),this.ownerNode&&!this.ownerNode.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(TK)}function bx(){const O=()=>{const O=undefined,Xc=[...nz.get.call(this)].filter((O=>O.ownerNode&&!O.ownerNode.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME)));return Xc.item=O=>Xc[O],Object.setPrototypeOf(Xc,StyleSheetList.prototype)};let Xc=O();const BV=undefined;return Xc=new Proxy(Xc,{get:function(Xc,BV){return O()[BV]}}),Xc}function CP(O){if("style"!==O)return cD.value.call(this,O);const Xc=()=>{const Xc=cD.value.call(this,O);return Object.setPrototypeOf([...Xc].filter((O=>!O.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let BV=Xc();const GC=undefined;return BV=new Proxy(BV,{get:function(O,BV){return Xc()[Number(BV)||BV]}}),BV}function UK(){const O=kA.get.call(this);return Object.setPrototypeOf([...O].filter((O=>!O.classList||!O.classList.contains(YN.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},Xc,{value:tA})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},BV,{value:mb})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},GC,{value:Jw})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},rE,{value:yS})),O&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},nz,{get:bx})),ZB&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},cD,{value:CP})),xo&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},kA,{get:UK}))}BV.injectProxy=GC},{"../../const":1}],16:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.replaceCSSVariablesNames=BV.variablesStore=BV.VariablesStore=void 0;const YN=O("../../generators/modify-colors"),GC=O("../../utils/text"),rE=O("./css-rules"),nz=O("./modify-css"),ZB=O("../../utils/color"),cD=O("../../const"),xo=1<<0,kA=1<<1,qr=1<<2,b=1<<3;class TK{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(O,Xc){return this.varTypes.has(O)&&(this.varTypes.get(O)&Xc)>0}addRulesForMatching(O){this.rulesQueue.push(O)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((O,Xc)=>{O.forEach((O=>{this.varTypes.has(Xc)&&this.resolveVariableType(O,this.varTypes.get(Xc))}))})),this.unknownColorVars.forEach((O=>{this.unknownBgVars.has(O)?(this.unknownColorVars.delete(O),this.unknownBgVars.delete(O),this.resolveVariableType(O,xo)):this.isVarType(O,xo|kA|qr)?this.unknownColorVars.delete(O):this.undefinedVars.add(O)})),this.unknownBgVars.forEach((O=>{const Xc=undefined;null!=this.findVarRef(O,(O=>this.unknownColorVars.has(O)||this.isVarType(O,kA|qr)))?this.itarateVarRefs(O,(O=>{this.resolveVariableType(O,xo)})):this.isVarType(O,xo|b)?this.unknownBgVars.delete(O):this.undefinedVars.add(O)})),this.changedTypeVars.forEach((O=>{this.typeChangeSubscriptions.has(O)&&this.typeChangeSubscriptions.get(O).forEach((O=>{O()}))})),this.changedTypeVars.clear()}getModifierForVariable(O){return Xc=>{const{varName:BV,sourceValue:YN,rule:GC,ignoredImgSelectors:rE,isCancelled:ZB}=O,cD=()=>{const O=[],cD=(GC,rE,nz)=>{if(!this.isVarType(BV,GC))return;const ZB=rE(BV);let cD;if(eV(YN))if(qe(YN)){let O=JB(YN,this.unstableVarValues);O||(O=GC===xo?"#ffffff":"#000000"),cD=nz(O,Xc)}else cD=bx(YN,(O=>rE(O)),(O=>nz(O,Xc)));else cD=nz(YN,Xc);O.push({property:ZB,value:cD})};if(cD(xo,UK,Ge),cD(kA,nx,sg),cD(qr,wd,Kg),this.isVarType(BV,b)){const cD=Lg(BV);let xo=YN;eV(YN)&&(xo=bx(YN,(O=>UK(O)),(O=>Ge(O,Xc))));const kA=(0,nz.getBgImageModifier)(xo,GC,rE,ZB);xo="function"==typeof kA?kA(Xc):kA,O.push({property:cD,value:xo})}return O},TK=new Set,tA=O=>{const Xc=()=>{const Xc=cD();O(Xc)};TK.add(Xc),this.subscribeForVarTypeChange(BV,Xc)},mb=()=>{TK.forEach((O=>{this.unsubscribeFromVariableTypeChanges(BV,O)}))};return{declarations:cD(),onTypeChange:{addListener:tA,removeListeners:mb}}}}getModifierForVarDependant(O,Xc){if(Xc.match(/^\s*(rgb|hsl)a?\(/)){const BV=O.startsWith("background"),YN=DT(O);return O=>{let GC=JB(Xc,this.unstableVarValues);GC||(GC=BV?"#ffffff":"#000000");const rE=undefined;return(BV?Ge:YN?sg:Kg)(GC,O)}}return"background-color"===O?O=>bx(Xc,(O=>UK(O)),(Xc=>Ge(Xc,O))):DT(O)?O=>bx(Xc,(O=>nx(O)),(Xc=>sg(Xc,O))):"background"===O||"background-image"===O||"box-shadow"===O?BV=>{const YN=new Set,GC=()=>{const GC=bx(Xc,(O=>this.isVarType(O,xo)?UK(O):this.isVarType(O,b)?Lg(O):(YN.add(O),O)),(O=>Ge(O,BV)));if("box-shadow"===O){const O=undefined,Xc=(0,nz.getShadowModifierWithInfo)(GC)(BV);if(Xc.unparseableMatchesLength!==Xc.matchesLength)return Xc.result}return GC},rE=GC();return YN.size>0?new Promise((O=>{const Xc=YN.values().next().value,BV=()=>{this.unsubscribeFromVariableTypeChanges(Xc,BV);const YN=GC();O(YN)};this.subscribeForVarTypeChange(Xc,BV)})):rE}:O.startsWith("border")||O.startsWith("outline")?O=>bx(Xc,(O=>wd(O)),(Xc=>Kg(Xc,O))):null}subscribeForVarTypeChange(O,Xc){this.typeChangeSubscriptions.has(O)||this.typeChangeSubscriptions.set(O,new Set);const BV=this.typeChangeSubscriptions.get(O);BV.has(Xc)||BV.add(Xc)}unsubscribeFromVariableTypeChanges(O,Xc){this.typeChangeSubscriptions.has(O)&&this.typeChangeSubscriptions.get(O).delete(Xc)}collectVariablesAndVarDep(O){O.forEach((O=>{(0,rE.iterateCSSRules)(O,(O=>{O.style&&(0,rE.iterateCSSDeclarations)(O.style,((O,Xc)=>{ul(O)&&this.inspectVariable(O,Xc),eV(Xc)&&this.inspectVarDependant(O,Xc)}))}))}))}collectRootVariables(){(0,rE.iterateCSSDeclarations)(document.documentElement.style,((O,Xc)=>{ul(O)&&this.inspectVariable(O,Xc)}))}inspectVariable(O,Xc){if(this.unstableVarValues.set(O,Xc),eV(Xc)&&qe(Xc)&&(this.unknownColorVars.add(O),this.definedVars.add(O)),this.definedVars.has(O))return;this.definedVars.add(O);const BV=undefined;KJ.test(Xc)||(0,ZB.parseColorWithCache)(Xc)?this.unknownColorVars.add(O):(Xc.includes("url(")||Xc.includes("linear-gradient(")||Xc.includes("radial-gradient("))&&this.resolveVariableType(O,b)}resolveVariableType(O,Xc){const BV=this.initialVarTypes.get(O)||0,YN=undefined,GC=(this.varTypes.get(O)||0)|Xc;this.varTypes.set(O,GC),(GC!==BV||this.undefinedVars.has(O))&&(this.changedTypeVars.add(O),this.undefinedVars.delete(O)),this.unknownColorVars.delete(O),this.unknownBgVars.delete(O)}collectRootVarDependants(){(0,rE.iterateCSSDeclarations)(document.documentElement.style,((O,Xc)=>{eV(Xc)&&this.inspectVarDependant(O,Xc)}))}inspectVarDependant(O,Xc){ul(O)?this.iterateVarDeps(Xc,(Xc=>{this.varRefs.has(O)||this.varRefs.set(O,new Set),this.varRefs.get(O).add(Xc)})):"background-color"===O||"box-shadow"===O?this.iterateVarDeps(Xc,(O=>this.resolveVariableType(O,xo))):DT(O)?this.iterateVarDeps(Xc,(O=>this.resolveVariableType(O,kA))):O.startsWith("border")||O.startsWith("outline")?this.iterateVarDeps(Xc,(O=>this.resolveVariableType(O,qr))):"background"!==O&&"background-image"!==O||this.iterateVarDeps(Xc,(O=>{if(this.isVarType(O,xo|b))return;const Xc=null!=this.findVarRef(O,(O=>this.unknownColorVars.has(O)||this.isVarType(O,kA|qr)));this.itarateVarRefs(O,(O=>{Xc?this.resolveVariableType(O,xo):this.unknownBgVars.add(O)}))}))}iterateVarDeps(O,Xc){const BV=new Set;CP(O,(O=>BV.add(O))),BV.forEach((O=>Xc(O)))}findVarRef(O,Xc,BV=new Set){if(BV.has(O))return null;BV.add(O);const YN=undefined;if(Xc(O))return O;const GC=this.varRefs.get(O);if(!GC||0===GC.size)return null;for(const O of GC){const YN=this.findVarRef(O,Xc,BV);if(YN)return YN}return null}itarateVarRefs(O,Xc){this.findVarRef(O,(O=>(Xc(O),!1)))}setOnRootVariableChange(O){this.onRootVariableDefined=O}putRootVars(O,Xc){const BV=O.sheet;BV.cssRules.length>0&&BV.deleteRule(0);const YN=new Map;(0,rE.iterateCSSDeclarations)(document.documentElement.style,((O,BV)=>{ul(O)&&(this.isVarType(O,xo)&&YN.set(UK(O),Ge(BV,Xc)),this.isVarType(O,kA)&&YN.set(nx(O),sg(BV,Xc)),this.isVarType(O,qr)&&YN.set(wd(O),Kg(BV,Xc)),this.subscribeForVarTypeChange(O,this.onRootVariableDefined))}));const GC=[];GC.push(":root {");for(const[O,Xc]of YN)GC.push(`    ${O}: ${Xc};`);GC.push("}");const nz=GC.join("\n");BV.insertRule(nz)}}function tA(O,Xc=0){const BV=O.indexOf("var(",Xc);if(BV>=0){const Xc=(0,GC.getParenthesesRange)(O,BV+3);if(Xc)return{start:BV,end:Xc.end}}return null}function mb(O){const Xc=[];let BV=0,YN;for(;YN=tA(O,BV);){const{start:GC,end:rE}=YN;Xc.push({start:GC,end:rE,value:O.substring(GC,rE)}),BV=YN.end+1}return Xc}function Jw(O,Xc){const BV=mb(O),YN=BV.length;if(0===YN)return O;const GC=O.length,rE=BV.map((O=>Xc(O.value))),nz=[];nz.push(O.substring(0,BV[0].start));for(let Xc=0;Xc<YN;Xc++){nz.push(rE[Xc]);const ZB=BV[Xc].end,cD=Xc<YN-1?BV[Xc+1].start:GC;nz.push(O.substring(ZB,cD))}return nz.join("")}function yS(O){const Xc=O.indexOf(",");let BV,YN;return Xc>=0?(BV=O.substring(4,Xc).trim(),YN=O.substring(Xc+1,O.length-1).trim()):(BV=O.substring(4,O.length-1).trim(),YN=""),{name:BV,fallback:YN}}function bx(O,Xc,BV){const YN=undefined;return Jw(O,(O=>{const{name:YN,fallback:GC}=yS(O),rE=Xc(YN);if(!GC)return`var(${rE})`;let nz;return nz=eV(GC)?bx(GC,Xc,BV):BV?BV(GC):GC,`var(${rE}, ${nz})`}))}function CP(O,Xc){bx(O,(O=>(Xc(O),O)))}function UK(O){return`--${cD.ROOT_VARS_PREFIX}-bg${O}`}function nx(O){return`--${cD.ROOT_VARS_PREFIX}-text${O}`}function wd(O){return`--${cD.ROOT_VARS_PREFIX}-border${O}`}function Lg(O){return`--${cD.ROOT_VARS_PREFIX}-bgimg${O}`}function ul(O){return O.startsWith("--")}function eV(O){return O.includes("var(")}function qe(O){return O.match(/^\s*(rgb|hsl)a?\(/)}function DT(O){return"color"===O||"caret-color"===O||"-webkit-text-fill-color"===O}BV.VariablesStore=TK,BV.variablesStore=new TK,BV.replaceCSSVariablesNames=bx;const KJ=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function tZ(O){if(KJ.test(O)){const Xc=O.split(",");let BV="rgb(";return Xc.forEach((O=>{BV+=`${O.trim()}, `})),BV=BV.substring(0,BV.length-2),BV+=")",{isRaw:!0,color:BV}}return{isRaw:!1,color:O}}function BS(O,Xc,BV){const{isRaw:YN,color:GC}=tZ(O),rE=(0,ZB.parseColorWithCache)(GC);if(rE){const O=BV(rE,Xc);if(YN){const Xc=(0,ZB.parseColorWithCache)(O);return Xc?`${Xc.r}, ${Xc.g}, ${Xc.b}`:O}return O}return GC}function Ge(O,Xc){return BS(O,Xc,YN.modifyBackgroundColor)}function sg(O,Xc){return BS(O,Xc,YN.modifyForegroundColor)}function Kg(O,Xc){return BS(O,Xc,YN.modifyBorderColor)}function JB(O,Xc,BV=new Set){let YN=!1;const GC=undefined,rE=Jw(O,(O=>{const{name:GC,fallback:rE}=yS(O);if(BV.has(GC))return YN=!0,null;BV.add(GC);const nz=Xc.get(GC)||rE;let ZB=null;return nz&&(ZB=eV(nz)?JB(nz,Xc,BV):nz),ZB||(YN=!0,null)}));return YN?null:rE}},{"../../const":1,"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/text":41,"./css-rules":4,"./modify-css":10}],17:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.stopWatchingForStyleChanges=BV.watchForStyleChanges=void 0;const YN=O("../../utils/array"),GC=O("../utils/dom"),rE=O("./style-manager"),nz=O("../../utils/platform"),ZB=O("../../const"),cD=[];let xo;const kA=new Map;let qr;function b(O){nz.isDefinedSelectorSupported&&(0,YN.forEach)(O.querySelectorAll(":not(:defined)"),(O=>{let Xc=O.tagName.toLowerCase();if(!Xc.includes("-")){const BV=O.getAttribute("is");if(!BV)return;Xc=BV}kA.has(Xc)||(kA.set(Xc,new Set),Jw(Xc).then((()=>{if(qr){const O=kA.get(Xc);kA.delete(Xc),qr(Array.from(O))}}))),kA.get(Xc).add(O)}))}let TK=!1;document.addEventListener(`${ZB.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{TK=!0}));const tA=new Map;function mb(O){if(TK=!0,tA.has(O.detail.tag)){const Xc=undefined;tA.get(O.detail.tag)()}}async function Jw(O){return new Promise((Xc=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(O).then((()=>Xc()));else{const BV=()=>{const YN=kA.get(O);YN&&YN.size>0&&(YN.values().next().value.matches(":defined")?Xc():requestAnimationFrame(BV))};requestAnimationFrame(BV)}}))}function yS(O){qr=O}function bx(){qr=null,kA.clear(),document.removeEventListener(`${ZB.EVENT_PREFIX}isDefined`,mb)}function CP(O,Xc,BV){nx();const nz=new Set(O),kA=new WeakMap,qr=new WeakMap;function TK(O){kA.set(O,O.previousElementSibling),qr.set(O,O.nextElementSibling)}function tA(O){kA.delete(O),qr.delete(O)}function Jw(O){return O.previousElementSibling!==kA.get(O)||O.nextElementSibling!==qr.get(O)}function bx(O){const{createdStyles:BV,removedStyles:YN,movedStyles:GC}=O;BV.forEach((O=>TK(O))),GC.forEach((O=>TK(O))),YN.forEach((O=>tA(O))),BV.forEach((O=>nz.add(O))),YN.forEach((O=>nz.delete(O))),BV.size+YN.size+GC.size>0&&Xc({created:Array.from(BV),removed:Array.from(YN),moved:Array.from(GC),updated:[]})}function CP({additions:O,moves:Xc,deletions:BV}){const YN=new Set,nz=new Set,ZB=new Set;O.forEach((O=>(0,rE.getManageableStyles)(O).forEach((O=>YN.add(O))))),BV.forEach((O=>(0,rE.getManageableStyles)(O).forEach((O=>nz.add(O))))),Xc.forEach((O=>(0,rE.getManageableStyles)(O).forEach((O=>ZB.add(O))))),bx({createdStyles:YN,removedStyles:nz,movedStyles:ZB}),O.forEach((O=>{(0,GC.iterateShadowHosts)(O,ul),b(O)}))}function UK(O){const Xc=new Set((0,rE.getManageableStyles)(O)),BV=new Set,YN=new Set,ZB=new Set;Xc.forEach((O=>{nz.has(O)||BV.add(O)})),nz.forEach((O=>{Xc.has(O)||YN.add(O)})),Xc.forEach((O=>{BV.has(O)||YN.has(O)||!Jw(O)||ZB.add(O)})),bx({createdStyles:BV,removedStyles:YN,movedStyles:ZB}),(0,GC.iterateShadowHosts)(O,ul),b(O)}function wd(O){const BV=new Set,YN=new Set;O.forEach((O=>{const{target:Xc}=O;Xc.isConnected&&((0,rE.shouldManageStyle)(Xc)?BV.add(Xc):Xc instanceof HTMLLinkElement&&Xc.disabled&&YN.add(Xc))})),BV.size+YN.size>0&&Xc({updated:Array.from(BV),created:[],removed:Array.from(YN),moved:[]})}function Lg(O){const Xc=(0,GC.createOptimizedTreeObserver)(O,{onMinorMutations:CP,onHugeMutations:UK}),BV=new MutationObserver(wd);BV.observe(O,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),cD.push(Xc,BV),xo.add(O)}function ul(O){const{shadowRoot:Xc}=O;null==Xc||xo.has(Xc)||(Lg(Xc),BV(Xc))}O.forEach(TK),Lg(document),(0,GC.iterateShadowHosts)(document.documentElement,ul),yS((O=>{const BV=[];O.forEach((O=>(0,YN.push)(BV,(0,rE.getManageableStyles)(O.shadowRoot)))),Xc({created:BV,updated:[],removed:[],moved:[]}),O.forEach((O=>{const{shadowRoot:Xc}=O;null!=Xc&&(ul(O),(0,GC.iterateShadowHosts)(Xc,ul),b(Xc))}))})),document.addEventListener(`${ZB.EVENT_PREFIX}isDefined`,mb),b(document)}function UK(){cD.forEach((O=>O.disconnect())),cD.splice(0,cD.length),xo=new WeakSet}function nx(){UK(),bx()}BV.watchForStyleChanges=CP,BV.stopWatchingForStyleChanges=nx},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../utils/dom":18,"./style-manager":13}],18:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.createOptimizedTreeObserver=BV.cleanReadyStateCompleteListeners=BV.addReadyStateCompleteListener=BV.isReadyStateComplete=BV.removeDOMReadyListener=BV.addDOMReadyListener=BV.setIsDOMReady=BV.isDOMReady=BV.iterateShadowHosts=BV.watchForNodePosition=BV.removeNode=BV.createNodeAsap=void 0;const YN=O("../utils/log"),GC=O("../../utils/throttle"),rE=O("../../utils/array"),nz=O("../../utils/time");function ZB({selectNode:O,createNode:Xc,updateNode:BV,selectTarget:YN,createTarget:GC,isTargetMutation:rE}){const nz=YN();if(nz){const YN=O();YN?BV(YN):Xc(nz)}else{const BV=new MutationObserver((BV=>{const GC=undefined;if(BV.find(rE)){ZB();const BV=YN();O()||Xc(BV)}})),nz=()=>{if("complete"!==document.readyState)return;ZB();const BV=YN()||GC();O()||Xc(BV)},ZB=()=>{document.removeEventListener("readystatechange",nz),BV.disconnect()};"complete"===document.readyState?nz():(document.addEventListener("readystatechange",nz),BV.observe(document,{childList:!0,subtree:!0}))}}function cD(O){O&&O.parentNode&&O.parentNode.removeChild(O)}function xo(O,Xc,BV=Function.prototype){const rE=10,ZB=(0,nz.getDuration)({seconds:2}),cD=(0,nz.getDuration)({seconds:10}),xo=O.previousSibling;let kA=O.parentNode;if(!kA)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===Xc&&!xo)throw new Error("Unable to watch for node position: there is no previous sibling");let qr=0,b=null,TK=null;const tA=(0,GC.throttle)((()=>{if(TK)return;qr++;const GC=Date.now();if(null==b)b=GC;else if(qr>=rE){if(GC-b<cD)return(0,YN.logWarn)(`Node position watcher paused: retry in ${ZB}ms`,O,xo),void(TK=setTimeout((()=>{b=null,qr=0,TK=null,tA()}),ZB));b=GC,qr=1}if("head"===Xc&&xo&&xo.parentNode!==kA)return(0,YN.logWarn)("Unable to restore node position: sibling parent changed",O,xo,kA),void yS();if("prev-sibling"===Xc){if(null==xo.parentNode)return(0,YN.logWarn)("Unable to restore node position: sibling was removed",O,xo,kA),void yS();xo.parentNode!==kA&&((0,YN.logWarn)("Style was moved to another parent",O,xo,kA),CP(xo.parentNode))}"head"!==Xc||kA.isConnected||(kA=document.head),(0,YN.logWarn)("Restoring node position",O,xo,kA),kA.insertBefore(O,xo&&xo.isConnected?xo.nextSibling:kA.firstChild),mb.takeRecords(),BV&&BV()})),mb=new MutationObserver((()=>{("head"===Xc&&(O.parentNode!==kA||!O.parentNode.isConnected)||"prev-sibling"===Xc&&O.previousSibling!==xo)&&tA()})),Jw=()=>{mb.observe(kA,{childList:!0})},yS=()=>{clearTimeout(TK),mb.disconnect(),tA.cancel()},bx=()=>{mb.takeRecords()},CP=O=>{kA=O,yS(),Jw()};return Jw(),{run:Jw,stop:yS,skip:bx}}function kA(O,Xc){if(null==O)return;const BV=document.createTreeWalker(O,NodeFilter.SHOW_ELEMENT,{acceptNode:O=>null==O.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let YN=O.shadowRoot?BV.currentNode:BV.nextNode();null!=YN;YN=BV.nextNode())YN.classList.contains("surfingkeys_hints_host")||(Xc(YN),kA(YN.shadowRoot,Xc))}BV.createNodeAsap=ZB,BV.removeNode=cD,BV.watchForNodePosition=xo,BV.iterateShadowHosts=kA;let qr=()=>"complete"===document.readyState||"interactive"===document.readyState;function b(O){BV.isDOMReady=O}BV.isDOMReady=qr,BV.setIsDOMReady=b;const TK=new Set;function tA(O){(0,BV.isDOMReady)()?O():TK.add(O)}function mb(O){TK.delete(O)}function Jw(){return"complete"===document.readyState}BV.addDOMReadyListener=tA,BV.removeDOMReadyListener=mb,BV.isReadyStateComplete=Jw;const yS=new Set;function bx(O){Jw()?O():yS.add(O)}function CP(){yS.clear()}if(BV.addReadyStateCompleteListener=bx,BV.cleanReadyStateCompleteListeners=CP,!(0,BV.isDOMReady)()){const O=()=>{(0,BV.isDOMReady)()&&(TK.forEach((O=>O())),TK.clear(),Jw()&&(document.removeEventListener("readystatechange",O),yS.forEach((O=>O())),yS.clear()))};document.addEventListener("readystatechange",O)}const UK=1e3;function nx(O){if(O.length>UK)return!0;let Xc=0;for(let BV=0;BV<O.length;BV++)if(Xc+=O[BV].addedNodes.length,Xc>UK)return!0;return!1}function wd(O){const Xc=new Set,BV=new Set,YN=new Set;O.forEach((O=>{(0,rE.forEach)(O.addedNodes,(O=>{O instanceof Element&&O.isConnected&&Xc.add(O)})),(0,rE.forEach)(O.removedNodes,(O=>{O instanceof Element&&(O.isConnected?(YN.add(O),Xc.delete(O)):BV.add(O))}))}));const GC=[],nz=[];return Xc.forEach((O=>{Xc.has(O.parentElement)&&GC.push(O)})),BV.forEach((O=>{BV.has(O.parentElement)&&nz.push(O)})),GC.forEach((O=>Xc.delete(O))),nz.forEach((O=>BV.delete(O))),{additions:Xc,moves:YN,deletions:BV}}const Lg=new Map,ul=new WeakMap;function eV(O,Xc){let YN,GC,rE;if(Lg.has(O))YN=Lg.get(O),GC=ul.get(YN);else{let Xc=!1,nz=!1;YN=new MutationObserver((YN=>{if(nx(YN))!Xc||(0,BV.isDOMReady)()?GC.forEach((({onHugeMutations:Xc})=>Xc(O))):nz||(rE=()=>GC.forEach((({onHugeMutations:Xc})=>Xc(O))),tA(rE),nz=!0),Xc=!0;else{const O=wd(YN);GC.forEach((({onMinorMutations:Xc})=>Xc(O)))}})),YN.observe(O,{childList:!0,subtree:!0}),Lg.set(O,YN),GC=new Set,ul.set(YN,GC)}return GC.add(Xc),{disconnect(){GC.delete(Xc),rE&&mb(rE),0===GC.size&&(YN.disconnect(),ul.delete(YN),Lg.delete(O))}}}BV.createOptimizedTreeObserver=eV},{"../../utils/array":30,"../../utils/throttle":42,"../../utils/time":43,"../utils/log":19}],19:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.logInfoCollapsed=BV.logWarn=BV.logInfo=void 0;const YN=O("../../utils/message"),GC=!0,rE=!1,nz="info";function ZB(O,...Xc){rE&&nz&&("info"===nz||"warn"===O)&&chrome.runtime.sendMessage({type:YN.MessageType.CS_LOG,data:{level:O,log:Xc}})}function cD(...O){GC&&ZB("info",...O)}function xo(...O){GC&&ZB("warn",...O)}function kA(O,...Xc){}BV.logInfo=cD,BV.logWarn=xo,BV.logInfoCollapsed=kA},{"../../utils/message":37}],20:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.DEFAULT_SETTINGS=BV.DEFAULT_COLORSCHEME=BV.DEFAULT_THEME=BV.DEFAULT_COLORS=void 0;const YN=O("./generators/theme-engines"),GC=O("./utils/platform"),rE=O("./utils/automation");BV.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},BV.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:GC.isMacOS?"Helvetica Neue":GC.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:YN.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:BV.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:BV.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:BV.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:BV.DEFAULT_COLORS.lightScheme.text,scrollbarColor:GC.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},BV.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:BV.DEFAULT_COLORS.lightScheme.background,textColor:BV.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:BV.DEFAULT_COLORS.darkScheme.background,textColor:BV.DEFAULT_COLORS.darkScheme.text}}},BV.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:BV.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:rE.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":25,"./utils/automation":32,"./utils/platform":40}],21:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.formatInversionFixes=BV.parseInversionFixes=BV.getInversionFixesFor=BV.getCSSFilterValue=BV.cssFilterStyleSheetTemplate=BV.hasFirefoxNewRootBehavior=BV.hasPatchForChromiumIssue501582=BV.FilterMode=void 0;const YN=O("./utils/format"),GC=O("./utils/matrix"),rE=O("./utils/parse"),nz=O("../utils/text"),ZB=O("../utils/url"),cD=O("./text-style"),xo=O("../utils/platform");var kA;function qr(){return!0}function b(){return Boolean(xo.isFirefox&&(0,xo.compareChromeVersions)(xo.firefoxVersion,"102.0")>=0)}function TK(O,Xc,BV,YN,GC){const rE=undefined,nz=undefined;return tA(mb(O),"invert(100%) hue-rotate(180deg)",O,Xc,BV,YN,GC)}function tA(O,Xc,BV,YN,rE,nz,ZB){const xo=CP(YN,nz,ZB),TK=[];if(TK.push("@media screen {"),O&&rE&&(TK.push(""),TK.push("/* Leading rule */"),TK.push(Jw(O))),BV.mode===kA.dark&&(TK.push(""),TK.push("/* Reverse rule */"),TK.push(bx(Xc,xo))),(BV.useFont||BV.textStroke>0)&&(TK.push(""),TK.push("/* Font */"),TK.push((0,cD.createTextStyle)(BV))),TK.push(""),TK.push("/* Text contrast */"),TK.push("html {"),TK.push("  text-shadow: 0 0 0 !important;"),TK.push("}"),TK.push(""),TK.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((O=>{TK.push(`${O}, ${O} * {`),TK.push("  -webkit-filter: none !important;"),TK.push("  filter: none !important;"),TK.push("}")})),rE){const O=[255,255,255],Xc=qr()||b()||BV.mode!==kA.dark?O:(0,GC.applyColorMatrix)(O,(0,GC.createFilterMatrix)(BV)).map(Math.round);TK.push(""),TK.push("/* Page background */"),TK.push("html {"),TK.push(`  background: rgb(${Xc.join(",")}) !important;`),TK.push("}")}return xo.css&&xo.css.length>0&&BV.mode===kA.dark&&(TK.push(""),TK.push("/* Custom rules */"),TK.push(xo.css)),TK.push(""),TK.push("}"),TK.join("\n")}function mb(O){const Xc=[];return O.mode===kA.dark&&Xc.push("invert(100%) hue-rotate(180deg)"),100!==O.brightness&&Xc.push(`brightness(${O.brightness}%)`),100!==O.contrast&&Xc.push(`contrast(${O.contrast}%)`),0!==O.grayscale&&Xc.push(`grayscale(${O.grayscale}%)`),0!==O.sepia&&Xc.push(`sepia(${O.sepia}%)`),0===Xc.length?null:Xc.join(" ")}function Jw(O){return["html {",`  -webkit-filter: ${O} !important;`,`  filter: ${O} !important;`,"}"].join("\n")}function yS(O){return O.map((O=>O.replace(/\,$/,""))).join(",\n")}function bx(O,Xc){const BV=[];return Xc.invert.length>0&&(BV.push(`${yS(Xc.invert)} {`),BV.push(`  -webkit-filter: ${O} !important;`),BV.push(`  filter: ${O} !important;`),BV.push("}")),Xc.noinvert.length>0&&(BV.push(`${yS(Xc.noinvert)} {`),BV.push("  -webkit-filter: none !important;"),BV.push("  filter: none !important;"),BV.push("}")),Xc.removebg.length>0&&(BV.push(`${yS(Xc.removebg)} {`),BV.push("  background: white !important;"),BV.push("}")),BV.join("\n")}function CP(O,Xc,BV){const YN=(0,rE.getSitesFixesFor)(O,Xc,BV,{commands:Object.keys(UK),getCommandPropName:O=>UK[O],parseCommandValue:(O,Xc)=>"CSS"===O?Xc.trim():(0,nz.parseArray)(Xc)}),GC={url:YN[0].url,invert:YN[0].invert||[],noinvert:YN[0].noinvert||[],removebg:YN[0].removebg||[],css:YN[0].css||""};if(O){const Xc=YN.slice(1).filter((Xc=>(0,ZB.isURLInList)(O,Xc.url))).sort(((O,Xc)=>Xc.url[0].length-O.url[0].length));if(Xc.length>0){const O=Xc[0];return{url:O.url,invert:GC.invert.concat(O.invert||[]),noinvert:GC.noinvert.concat(O.noinvert||[]),removebg:GC.removebg.concat(O.removebg||[]),css:[GC.css,O.css].filter((O=>O)).join("\n")}}}return GC}!function(O){O[O["light"]=0]="light",O[O["dark"]=1]="dark"}(kA=BV.FilterMode||(BV.FilterMode={})),BV.hasPatchForChromiumIssue501582=qr,BV.hasFirefoxNewRootBehavior=b,BV.default=TK,BV.cssFilterStyleSheetTemplate=tA,BV.getCSSFilterValue=mb,BV.getInversionFixesFor=CP;const UK={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function nx(O){return(0,rE.parseSitesFixesConfig)(O,{commands:Object.keys(UK),getCommandPropName:O=>UK[O],parseCommandValue:(O,Xc)=>"CSS"===O?Xc.trim():(0,nz.parseArray)(Xc)})}function wd(O){const Xc=O.slice().sort(((O,Xc)=>(0,ZB.compareURLPatterns)(O.url[0],Xc.url[0])));return(0,YN.formatSitesFixesConfig)(Xc,{props:Object.values(UK),getPropCommandName:O=>Object.entries(UK).find((([,Xc])=>Xc===O))[0],formatPropValue:(O,Xc)=>"css"===O?Xc.trim().replace(/\n+/g,"\n"):(0,nz.formatArray)(Xc).trim(),shouldIgnoreProp:(O,Xc)=>"css"===O?!Xc:!(Array.isArray(Xc)&&Xc.length>0)})}BV.parseInversionFixes=nx,BV.formatInversionFixes=wd},{"../utils/platform":40,"../utils/text":41,"../utils/url":45,"./text-style":24,"./utils/format":26,"./utils/matrix":27,"./utils/parse":28}],22:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.modifyGradientColor=BV.modifyShadowColor=BV.modifyBorderColor=BV.modifyForegroundColor=BV.modifyBackgroundColor=BV.modifyColor=BV.clearColorModificationCache=void 0;const YN=O("../utils/color"),GC=O("../utils/math"),rE=O("./utils/matrix");function nz(O){const Xc=undefined,BV=undefined;return O[1===O.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function ZB(O){const Xc=undefined,BV=undefined;return O[1===O.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const cD=new Map;function xo(){cD.clear()}BV.clearColorModificationCache=xo;const kA=["r","g","b","a"],qr=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function b(O,Xc){let BV="";return kA.forEach((Xc=>{BV+=`${O[Xc]};`})),qr.forEach((O=>{BV+=`${Xc[O]};`})),BV}function TK(O,Xc,BV,GC,nz){let ZB;cD.has(BV)?ZB=cD.get(BV):(ZB=new Map,cD.set(BV,ZB));const xo=b(O,Xc);if(ZB.has(xo))return ZB.get(xo);const kA=undefined,qr=undefined,TK=undefined,tA=BV((0,YN.rgbToHSL)(O),null==GC?null:(0,YN.parseToHSLWithCache)(GC),null==nz?null:(0,YN.parseToHSLWithCache)(nz)),{r:mb,g:Jw,b:yS,a:bx}=(0,YN.hslToRGB)(tA),CP=(0,rE.createFilterMatrix)(Xc),[UK,nx,wd]=(0,rE.applyColorMatrix)([mb,Jw,yS],CP),Lg=1===bx?(0,YN.rgbToHexString)({r:UK,g:nx,b:wd}):(0,YN.rgbToString)({r:UK,g:nx,b:wd,a:bx});return ZB.set(xo,Lg),Lg}function tA(O){return O}function mb(O,Xc){return TK(O,Xc,tA)}function Jw(O,Xc){const BV=nz(Xc),YN=undefined;return TK(O,Xc,yS,ZB(Xc),BV)}function yS({h:O,s:Xc,l:BV,a:YN},rE,nz){const ZB=BV<.5;let cD;if(ZB)cD=BV<.2||Xc<.12;else{const YN=undefined;cD=Xc<.24||BV>.8&&(O>200&&O<280)}let xo=O,kA=BV;cD&&(ZB?(xo=rE.h,kA=rE.s):(xo=nz.h,kA=nz.s));const qr=undefined;return{h:xo,s:kA,l:(0,GC.scale)(BV,0,1,rE.l,nz.l),a:YN}}BV.modifyColor=mb;const bx=.4;function CP({h:O,s:Xc,l:BV,a:YN},rE){const nz=undefined,ZB=undefined,cD=Xc<.12||BV>.8&&(O>200&&O<280);if(BV<.5){const nz=(0,GC.scale)(BV,0,.5,0,bx);if(cD){const O=undefined,Xc=undefined;return{h:rE.h,s:rE.s,l:nz,a:YN}}return{h:O,s:Xc,l:nz,a:YN}}let xo=(0,GC.scale)(BV,.5,1,bx,rE.l);if(cD){const O=undefined,Xc=undefined;return{h:rE.h,s:rE.s,l:xo,a:YN}}let kA=O;const qr=undefined;if(O>60&&O<180){const Xc=undefined;kA=O>120?(0,GC.scale)(O,120,180,135,180):(0,GC.scale)(O,60,120,60,105)}return kA>40&&kA<80&&(xo*=.75),{h:kA,s:Xc,l:xo,a:YN}}function UK(O,Xc){if(0===Xc.mode)return Jw(O,Xc);const BV=nz(Xc);return TK(O,Object.assign(Object.assign({},Xc),{mode:0}),CP,BV)}BV.modifyBackgroundColor=UK;const nx=.55;function wd(O){return(0,GC.scale)(O,205,245,205,220)}function Lg({h:O,s:Xc,l:BV,a:YN},rE){const nz=undefined,ZB=BV<.2||Xc<.24,cD=!ZB&&O>205&&O<245;if(BV>.5){const nz=(0,GC.scale)(BV,.5,1,nx,rE.l);if(ZB){const O=undefined,Xc=undefined;return{h:rE.h,s:rE.s,l:nz,a:YN}}let xo=O;return cD&&(xo=wd(O)),{h:xo,s:Xc,l:nz,a:YN}}if(ZB){const O=undefined,Xc=undefined,nz=undefined;return{h:rE.h,s:rE.s,l:(0,GC.scale)(BV,0,.5,rE.l,nx),a:YN}}let xo=O,kA;return cD?(xo=wd(O),kA=(0,GC.scale)(BV,0,.5,rE.l,Math.min(1,nx+.05))):kA=(0,GC.scale)(BV,0,.5,rE.l,nx),{h:xo,s:Xc,l:kA,a:YN}}function ul(O,Xc){if(0===Xc.mode)return Jw(O,Xc);const BV=ZB(Xc);return TK(O,Object.assign(Object.assign({},Xc),{mode:0}),Lg,BV)}function eV({h:O,s:Xc,l:BV,a:YN},rE,nz){const ZB=undefined,cD=undefined;let xo=O,kA=Xc;(BV<.2||Xc<.24)&&(BV<.5?(xo=rE.h,kA=rE.s):(xo=nz.h,kA=nz.s));const qr=undefined;return{h:xo,s:kA,l:(0,GC.scale)(BV,0,1,.5,.2),a:YN}}function qe(O,Xc){if(0===Xc.mode)return Jw(O,Xc);const BV=ZB(Xc),YN=nz(Xc);return TK(O,Object.assign(Object.assign({},Xc),{mode:0}),eV,BV,YN)}function DT(O,Xc){return UK(O,Xc)}function KJ(O,Xc){return UK(O,Xc)}BV.modifyForegroundColor=ul,BV.modifyBorderColor=qe,BV.modifyShadowColor=DT,BV.modifyGradientColor=KJ},{"../utils/color":33,"../utils/math":36,"./utils/matrix":27}],23:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.getSVGReverseFilterMatrixValue=BV.getSVGFilterMatrixValue=BV.createSVGFilterStylesheet=void 0;const YN=O("./utils/matrix"),GC=O("./css-filter"),rE=O("../utils/platform"),nz=O("../const");function ZB(O,Xc,BV,YN,ZB){let xo,b;return rE.isFirefox?(xo=cD(kA(O)),b=cD(qr())):(xo=`url(#${nz.MISC_PREFIX}-filter)`,b=`url(#${nz.MISC_PREFIX}-reverse-filter)`),(0,GC.cssFilterStyleSheetTemplate)(xo,b,O,Xc,BV,YN,ZB)}function cD(O){const Xc=`${nz.MISC_PREFIX}-filter`,BV=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${Xc}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${O}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(BV)}#${Xc})`}function xo(O){return O.slice(0,4).map((O=>O.map((O=>O.toFixed(3))).join(" "))).join(" ")}function kA(O){return xo((0,YN.createFilterMatrix)(O))}function qr(){return xo(YN.Matrix.invertNHue())}BV.createSVGFilterStylesheet=ZB,BV.getSVGFilterMatrixValue=kA,BV.getSVGReverseFilterMatrixValue=qr},{"../const":1,"../utils/platform":40,"./css-filter":21,"./utils/matrix":27}],24:[function(O,Xc,BV){"use strict";function YN(O){const Xc=[];return Xc.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),O.useFont&&O.fontFamily&&Xc.push(`  font-family: ${O.fontFamily} !important;`),O.textStroke>0&&(Xc.push(`  -webkit-text-stroke: ${O.textStroke}px !important;`),Xc.push(`  text-stroke: ${O.textStroke}px !important;`)),Xc.push("}"),Xc.join("\n")}Object.defineProperty(BV,"__esModule",{value:!0}),BV.createTextStyle=void 0,BV.createTextStyle=YN},{}],25:[function(O,Xc,BV){"use strict";var YN;Object.defineProperty(BV,"__esModule",{value:!0}),BV.ThemeEngine=void 0,function(O){O["cssFilter"]="cssFilter",O["svgFilter"]="svgFilter",O["staticTheme"]="staticTheme",O["dynamicTheme"]="dynamicTheme"}(YN=BV.ThemeEngine||(BV.ThemeEngine={}))},{}],26:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.formatSitesFixesConfig=void 0;const YN=O("../../utils/array");function GC(O,Xc){const BV=[];return O.forEach(((GC,rE)=>{(0,YN.push)(BV,GC.url),Xc.props.forEach((O=>{const YN=Xc.getPropCommandName(O),rE=GC[O];if(Xc.shouldIgnoreProp(O,rE))return;BV.push(""),BV.push(YN);const nz=Xc.formatPropValue(O,rE);nz&&BV.push(nz)})),rE<O.length-1&&(BV.push(""),BV.push("=".repeat(32)),BV.push(""))})),BV.push(""),BV.join("\n")}BV.formatSitesFixesConfig=GC},{"../../utils/array":30}],27:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.Matrix=BV.applyColorMatrix=BV.createFilterMatrix=void 0;const YN=O("../../utils/math");function GC(O){let Xc=BV.Matrix.identity();return 0!==O.sepia&&(Xc=(0,YN.multiplyMatrices)(Xc,BV.Matrix.sepia(O.sepia/100))),0!==O.grayscale&&(Xc=(0,YN.multiplyMatrices)(Xc,BV.Matrix.grayscale(O.grayscale/100))),100!==O.contrast&&(Xc=(0,YN.multiplyMatrices)(Xc,BV.Matrix.contrast(O.contrast/100))),100!==O.brightness&&(Xc=(0,YN.multiplyMatrices)(Xc,BV.Matrix.brightness(O.brightness/100))),1===O.mode&&(Xc=(0,YN.multiplyMatrices)(Xc,BV.Matrix.invertNHue())),Xc}function rE([O,Xc,BV],GC){const rE=[[O/255],[Xc/255],[BV/255],[1],[1]],nz=(0,YN.multiplyMatrices)(GC,rE);return[0,1,2].map((O=>(0,YN.clamp)(Math.round(255*nz[O][0]),0,255)))}BV.createFilterMatrix=GC,BV.applyColorMatrix=rE,BV.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:O=>[[O,0,0,0,0],[0,O,0,0,0],[0,0,O,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(O){const Xc=(1-O)/2;return[[O,0,0,0,Xc],[0,O,0,0,Xc],[0,0,O,0,Xc],[0,0,0,1,0],[0,0,0,0,1]]},sepia:O=>[[.393+.607*(1-O),.769-.769*(1-O),.189-.189*(1-O),0,0],[.349-.349*(1-O),.686+.314*(1-O),.168-.168*(1-O),0,0],[.272-.272*(1-O),.534-.534*(1-O),.131+.869*(1-O),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:O=>[[.2126+.7874*(1-O),.7152-.7152*(1-O),.0722-.0722*(1-O),0,0],[.2126-.2126*(1-O),.7152+.2848*(1-O),.0722-.0722*(1-O),0,0],[.2126-.2126*(1-O),.7152-.7152*(1-O),.0722+.9278*(1-O),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":36}],28:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.isURLInSiteList=BV.indexSiteListConfig=BV.getSitesFixesFor=BV.indexSitesFixesConfig=BV.getDomain=BV.parseSitesFixesConfig=void 0;const YN=O("../../utils/url"),GC=O("../../utils/text"),rE=6e4;function nz(O,Xc){const BV=[],YN=undefined;return O.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((O=>{const YN=O.split("\n"),rE=[];if(YN.forEach(((O,Xc)=>{O.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&rE.push(Xc)})),0===rE.length)return;const nz={url:(0,GC.parseArray)(YN.slice(0,rE[0]).join("\n"))};rE.forEach(((O,BV)=>{const GC=YN[O].trim(),ZB=YN.slice(O+1,BV===rE.length-1?YN.length:rE[BV+1]).join("\n"),cD=Xc.getCommandPropName(GC);if(!cD)return;const xo=Xc.parseCommandValue(GC,ZB);nz[cD]=xo})),BV.push(nz)})),BV}function ZB(O){try{return new URL(O).hostname.toLowerCase()}catch(Xc){return O.split("/")[0].toLowerCase()}}function cD(O){return O.map((([O,Xc])=>{const BV=O.toString(36),YN=Xc.toString(36);return"0".repeat(4-BV.length)+BV+"0".repeat(3-YN.length)+YN})).join("")}function xo(O,Xc){const BV=(4+3)*Xc,YN=parseInt(O.substring(BV+0,BV+4),36),GC=undefined;return[YN,YN+parseInt(O.substring(BV+4,BV+4+3),36)]}function kA(O,Xc,BV){O[Xc]?O[Xc].includes(BV)||O[Xc].push(BV):O[Xc]=[BV]}function qr(O){const Xc=O.lastIndexOf("*"),BV=O.substring(Xc+2);if(Xc<0||0===BV.length)return O.split(".");const YN=[BV],GC=undefined;return O.substring(0,Xc).split(".").filter(Boolean).forEach((O=>YN.concat(O))),YN}function b(O){const Xc={},BV={},GC=[],rE={},nz=[];for(let BV=0;BV<O.length;BV++){const cD=O[BV],xo=new Set;for(const O of cD){const rE=ZB(O);if((0,YN.isFullyQualifiedDomain)(rE))kA(Xc,rE,BV);else{if(!(0,YN.isFullyQualifiedDomainWildcard)(rE)){GC.push(BV);break}{const O=qr(rE);nz.push({labels:O,index:BV}),O.forEach((O=>xo.add(O)))}}}for(const O of xo)rE[O]?rE[O]++:rE[O]=1}for(const{labels:O,index:Xc}of nz){let YN=O[0];for(const Xc of O)rE[Xc]<rE[YN]&&(YN=Xc);kA(BV,YN,Xc)}return{domains:Xc,domainLabels:BV,nonstandard:GC}}function TK(O,Xc,BV,YN,rE){const nz=undefined,ZB=O.substring(BV,YN).split("\n"),cD=[];if(ZB.forEach(((O,Xc)=>{O.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&cD.push(Xc)})),0===cD.length)return;Xc.push([BV,YN-BV]);const xo=(0,GC.parseArray)(ZB.slice(0,cD[0]).join("\n"));rE.push(xo)}function tA(O){const Xc=[],BV=[];let YN=0;const GC=/^\s*={2,}\s*$/gm;let rE;for(;rE=GC.exec(O);){const GC=rE.index,nz=rE.index+rE[0].length;TK(O,BV,YN,GC,Xc),YN=nz}return TK(O,BV,YN,O.length,Xc),{urls:Xc,offsets:BV}}function mb(O){const{urls:Xc,offsets:BV}=tA(O),{domains:YN,domainLabels:GC,nonstandard:rE}=b(Xc);return{offsets:cD(BV),domains:YN,domainLabels:GC,nonstandard:rE,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function Jw(O,Xc,BV){const GC=ZB(O),rE=GC.split(".");let nz=[];"*"in Xc.domainLabels&&(nz=nz.concat(Xc.domainLabels["*"]));for(const O of rE)if(O in Xc.domainLabels){const rE=Xc.domainLabels[O];for(const O of rE){const Xc=BV(O);for(const BV of Xc){const Xc=ZB(BV);(0,YN.isFullyQualifiedDomainWildcard)(Xc)&&(0,YN.fullyQualifiedDomainMatchesWildcard)(Xc,GC)&&nz.push(O)}}}for(let O=0;O<rE.length;O++){const BV=rE.slice(O).join(".");BV in Xc.domains&&(nz=nz.concat(Xc.domains[BV])),BV in Xc.domainLabels&&(nz=nz.concat(Xc.domainLabels[BV]))}return nz=nz.concat(Xc.nonstandard),nz=Array.from(new Set(nz)),nz}function yS(O,Xc,BV,YN){if(YN in Xc.cacheSiteFix)return Xc.cacheSiteFix[YN];const[GC,rE]=xo(Xc.offsets,YN),ZB=undefined,cD=nz(O.substring(GC,rE),BV)[0];return Xc.cacheSiteFix[YN]=cD,cD}function bx(O){clearTimeout(O.cacheCleanupTimer),O.cacheCleanupTimer=setTimeout((()=>{O.cacheCleanupTimer=null,O.cacheDomainIndex={},O.cacheSiteFix={}}),rE)}function CP(O,Xc,BV,YN){const GC=[],rE=ZB(O);BV.cacheDomainIndex[rE]||(BV.cacheDomainIndex[rE]=Jw(rE,BV,(O=>yS(Xc,BV,YN,O).url)));const nz=BV.cacheDomainIndex[rE];for(const O of nz){const rE=yS(Xc,BV,YN,O);GC.push(rE)}return bx(BV),GC}function UK(O){const Xc=(0,GC.parseArray)(O),BV=Xc.map((O=>[O])),{domains:YN,domainLabels:rE,nonstandard:nz}=b(BV);return{domains:YN,domainLabels:rE,nonstandard:nz,urls:Xc}}function nx(O,Xc){const BV=undefined,YN=Jw(ZB(O),Xc,(O=>[Xc.urls[O]])),GC=[];for(const O of YN)GC.push(Xc.urls[O]);return GC}function wd(O,Xc){if(null===Xc)return!1;const BV=nx(O,Xc);return(0,YN.isURLInList)(O,BV)}BV.parseSitesFixesConfig=nz,BV.getDomain=ZB,BV.indexSitesFixesConfig=mb,BV.getSitesFixesFor=CP,BV.indexSiteListConfig=UK,BV.isURLInSiteList=wd},{"../../utils/text":41,"../../utils/url":45}],29:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.PREFIX=void 0,BV.PREFIX="dm"},{}],30:[function(O,Xc,BV){"use strict";function YN(O){return null!=O.length}function GC(O,Xc){if(YN(O))for(let BV=0,YN=O.length;BV<YN;BV++)Xc(O[BV]);else for(const BV of O)Xc(BV)}function rE(O,Xc){GC(Xc,(Xc=>O.push(Xc)))}function nz(O){const Xc=[];for(let BV=0,YN=O.length;BV<YN;BV++)Xc.push(O[BV]);return Xc}Object.defineProperty(BV,"__esModule",{value:!0}),BV.toArray=BV.push=BV.forEach=void 0,BV.forEach=GC,BV.push=rE,BV.toArray=nz},{}],31:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0});class YN{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(O){this.queue.push(O),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const O=Date.now();let Xc;for(;Xc=this.queue.shift();)if(Xc(),Date.now()-O>=this.frameDuration){this.startQueue();break}})))}}BV.default=YN},{}],32:[function(O,Xc,BV){"use strict";var YN;Object.defineProperty(BV,"__esModule",{value:!0}),BV.AutomationMode=void 0,function(O){O["NONE"]="",O["TIME"]="time",O["SYSTEM"]="system",O["LOCATION"]="location"}(YN=BV.AutomationMode||(BV.AutomationMode={}))},{}],33:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.getSRGBLightness=BV.lowerCalcExpression=BV.parse=BV.hslToString=BV.rgbToHexString=BV.rgbToString=BV.rgbToHSL=BV.hslToRGB=BV.clearColorCache=BV.parseToHSLWithCache=BV.parseColorWithCache=void 0;const YN=O("./math-eval"),GC=O("./text"),rE=new Map,nz=new Map;function ZB(O){if(O=O.trim(),nz.has(O))return nz.get(O);O.includes("calc(")&&(O=Ge(O));const Xc=CP(O);return Xc&&nz.set(O,Xc),Xc}function cD(O){if(rE.has(O))return rE.get(O);const Xc=ZB(O);if(!Xc)return null;const BV=qr(Xc);return rE.set(O,BV),BV}function xo(){rE.clear(),nz.clear()}function kA({h:O,s:Xc,l:BV,a:YN=1}){if(0===Xc){const[O,Xc,GC]=[BV,BV,BV].map((O=>Math.round(255*O)));return{r:O,g:GC,b:Xc,a:YN}}const GC=(1-Math.abs(2*BV-1))*Xc,rE=GC*(1-Math.abs(O/60%2-1)),nz=BV-GC/2,[ZB,cD,xo]=(O<60?[GC,rE,0]:O<120?[rE,GC,0]:O<180?[0,GC,rE]:O<240?[0,rE,GC]:O<300?[rE,0,GC]:[GC,0,rE]).map((O=>Math.round(255*(O+nz))));return{r:ZB,g:cD,b:xo,a:YN}}function qr({r:O,g:Xc,b:BV,a:YN=1}){const GC=O/255,rE=Xc/255,nz=BV/255,ZB=Math.max(GC,rE,nz),cD=Math.min(GC,rE,nz),xo=ZB-cD,kA=(ZB+cD)/2;if(0===xo)return{h:0,s:0,l:kA,a:YN};let qr=60*(ZB===GC?(rE-nz)/xo%6:ZB===rE?(nz-GC)/xo+2:(GC-rE)/xo+4);qr<0&&(qr+=360);const b=undefined;return{h:qr,s:xo/(1-Math.abs(2*kA-1)),l:kA,a:YN}}function b(O,Xc=0){const BV=O.toFixed(Xc);if(0===Xc)return BV;const YN=BV.indexOf(".");if(YN>=0){const O=BV.match(/0+$/);if(O)return O.index===YN+1?BV.substring(0,YN):BV.substring(0,O.index)}return BV}function TK(O){const{r:Xc,g:BV,b:YN,a:GC}=O;return null!=GC&&GC<1?`rgba(${b(Xc)}, ${b(BV)}, ${b(YN)}, ${b(GC,2)})`:`rgb(${b(Xc)}, ${b(BV)}, ${b(YN)})`}function tA({r:O,g:Xc,b:BV,a:YN}){return`#${(null!=YN&&YN<1?[O,Xc,BV,Math.round(255*YN)]:[O,Xc,BV]).map((O=>`${O<16?"0":""}${O.toString(16)}`)).join("")}`}function mb(O){const{h:Xc,s:BV,l:YN,a:GC}=O;return null!=GC&&GC<1?`hsla(${b(Xc)}, ${b(100*BV)}%, ${b(100*YN)}%, ${b(GC,2)})`:`hsl(${b(Xc)}, ${b(100*BV)}%, ${b(100*YN)}%)`}BV.parseColorWithCache=ZB,BV.parseToHSLWithCache=cD,BV.clearColorCache=xo,BV.hslToRGB=kA,BV.rgbToHSL=qr,BV.rgbToString=TK,BV.rgbToHexString=tA,BV.hslToString=mb;const Jw=/^rgba?\([^\(\)]+\)$/,yS=/^hsla?\([^\(\)]+\)$/,bx=/^#[0-9a-f]+$/i;function CP(O){const Xc=O.trim().toLowerCase();return Xc.match(Jw)?ul(Xc):Xc.match(yS)?DT(Xc):Xc.match(bx)?KJ(Xc):sg.has(Xc)?tZ(Xc):Kg.has(Xc)?BS(Xc):"transparent"===O?{r:0,g:0,b:0,a:0}:null}function UK(O){const Xc=[];let BV=0,YN=!1;const GC=O.indexOf("(");O=O.substring(GC+1,O.length-1);for(let GC=0;GC<O.length;GC++){const rE=O[GC];rE>="0"&&rE<="9"||"."===rE||"+"===rE||"-"===rE?YN=!0:!YN||" "!==rE&&","!==rE&&"/"!==rE?YN||(BV=GC+1):(Xc.push(O.substring(BV,GC)),YN=!1,BV=GC+1)}return YN&&Xc.push(O.substring(BV,O.length)),Xc}function nx(O,Xc,BV){const YN=UK(O),GC=Object.entries(BV),rE=undefined;return YN.map((O=>O.trim())).map(((O,BV)=>{let YN;const rE=GC.find((([Xc])=>O.endsWith(Xc)));return YN=rE?parseFloat(O.substring(0,O.length-rE[0].length))/rE[1]*Xc[BV]:parseFloat(O),Xc[BV]>1?Math.round(YN):YN}))}BV.parse=CP;const wd=[255,255,255,1],Lg={"%":100};function ul(O){const[Xc,BV,YN,GC=1]=nx(O,wd,Lg);return{r:Xc,g:BV,b:YN,a:GC}}const eV=[360,1,1,1],qe={"%":100,deg:360,rad:2*Math.PI,turn:1};function DT(O){const[Xc,BV,YN,GC=1]=nx(O,eV,qe);return kA({h:Xc,s:BV,l:YN,a:GC})}function KJ(O){const Xc=O.substring(1);switch(Xc.length){case 3:case 4:{const[O,BV,YN]=[0,1,2].map((O=>parseInt(`${Xc[O]}${Xc[O]}`,16))),GC=undefined;return{r:O,g:BV,b:YN,a:3===Xc.length?1:parseInt(`${Xc[3]}${Xc[3]}`,16)/255}}case 6:case 8:{const[O,BV,YN]=[0,2,4].map((O=>parseInt(Xc.substring(O,O+2),16))),GC=undefined;return{r:O,g:BV,b:YN,a:6===Xc.length?1:parseInt(Xc.substring(6,8),16)/255}}}return null}function tZ(O){const Xc=sg.get(O);return{r:Xc>>16&255,g:Xc>>8&255,b:Xc>>0&255,a:1}}function BS(O){const Xc=Kg.get(O);return{r:Xc>>16&255,g:Xc>>8&255,b:Xc>>0&255,a:1}}function Ge(O){let Xc=0;const BV=(Xc,BV,YN)=>{O=O.substring(0,Xc)+YN+O.substring(BV)};for(;-1!==(Xc=O.indexOf("calc("));){const rE=(0,GC.getParenthesesRange)(O,Xc);if(!rE)break;let nz=O.slice(rE.start+1,rE.end-1);const ZB=nz.includes("%");nz=nz.split("%").join("");const cD=Math.round((0,YN.evalMath)(nz));BV(rE.start-4,rE.end,cD+(ZB?"%":""))}return O}BV.lowerCalcExpression=Ge;const sg=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),Kg=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([O,Xc])=>[O.toLowerCase(),Xc])));function JB(O,Xc,BV){return(.2126*O+.7152*Xc+.0722*BV)/255}BV.getSRGBLightness=JB},{"./math-eval":35,"./text":41}],34:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.compareIPV6=BV.isIPV6=void 0;const YN=/\[[0-9:a-zA-Z]+?\]/;function GC(O){const Xc=YN.exec(O);if(!Xc)return!1;const BV=O.indexOf("?");return!(BV>=0&&Xc.index>BV)}BV.isIPV6=GC;const rE=/\[.*?\](\:\d+)?/;function nz(O,Xc){const BV=undefined,YN=undefined;return O.match(rE)[0]===Xc.match(rE)[0]}BV.compareIPV6=nz},{}],35:[function(O,Xc,BV){"use strict";function YN(O){const Xc=[],BV=[];let YN;for(let GC=0,nz=O.length;GC<nz;GC++){const nz=O[GC];if(nz&&" "!==nz){if(rE.has(nz)){const O=rE.get(nz);for(;BV.length;){const YN=rE.get(BV[0]);if(!YN)break;if(!O.lessOrEqualThan(YN))break;Xc.push(BV.shift())}BV.unshift(nz)}else!YN||rE.has(YN)?Xc.push(nz):Xc[Xc.length-1]+=nz;YN=nz}}Xc.push(...BV);const GC=[];for(let O=0,BV=Xc.length;O<BV;O++){const BV=rE.get(Xc[O]);if(BV){const O=GC.splice(0,2);GC.push(BV.exec(O[1],O[0]))}else GC.unshift(parseFloat(Xc[O]))}return GC[0]}Object.defineProperty(BV,"__esModule",{value:!0}),BV.evalMath=void 0,BV.evalMath=YN;class GC{constructor(O,Xc){this.precendce=O,this.execMethod=Xc}exec(O,Xc){return this.execMethod(O,Xc)}lessOrEqualThan(O){return this.precendce<=O.precendce}}const rE=new Map([["+",new GC(1,((O,Xc)=>O+Xc))],["-",new GC(1,((O,Xc)=>O-Xc))],["*",new GC(2,((O,Xc)=>O*Xc))],["/",new GC(2,((O,Xc)=>O/Xc))]])},{}],36:[function(O,Xc,BV){"use strict";function YN(O,Xc,BV,YN,GC){return(O-Xc)*(GC-YN)/(BV-Xc)+YN}function GC(O,Xc,BV){return Math.min(BV,Math.max(Xc,O))}function rE(O,Xc){const BV=[];for(let YN=0,GC=O.length;YN<GC;YN++){BV[YN]=[];for(let GC=0,rE=Xc[0].length;GC<rE;GC++){let rE=0;for(let BV=0,nz=O[0].length;BV<nz;BV++)rE+=O[YN][BV]*Xc[BV][GC];BV[YN][GC]=rE}}return BV}Object.defineProperty(BV,"__esModule",{value:!0}),BV.multiplyMatrices=BV.clamp=BV.scale=void 0,BV.scale=YN,BV.clamp=GC,BV.multiplyMatrices=rE},{}],37:[function(O,Xc,BV){"use strict";var YN;Object.defineProperty(BV,"__esModule",{value:!0}),BV.MessageType=void 0,function(O){O["UI_GET_DATA"]="ui-get-data",O["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",O["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",O["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",O["UI_CHANGE_SETTINGS"]="ui-change-settings",O["UI_SET_THEME"]="ui-set-theme",O["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",O["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",O["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",O["UI_LOAD_CONFIG"]="ui-load-config",O["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",O["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",O["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",O["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",O["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",O["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",O["UI_SAVE_FILE"]="ui-save-file",O["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",O["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",O["BG_CHANGES"]="bg-changes",O["BG_ADD_CSS_FILTER"]="bg-add-css-filter",O["BG_ADD_STATIC_THEME"]="bg-add-static-theme",O["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",O["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",O["BG_EXPORT_CSS"]="bg-export-css",O["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",O["BG_CLEAN_UP"]="bg-clean-up",O["BG_RELOAD"]="bg-reload",O["BG_FETCH_RESPONSE"]="bg-fetch-response",O["BG_UI_UPDATE"]="bg-ui-update",O["BG_CSS_UPDATE"]="bg-css-update",O["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",O["CS_FRAME_CONNECT"]="cs-frame-connect",O["CS_FRAME_FORGET"]="cs-frame-forget",O["CS_FRAME_FREEZE"]="cs-frame-freeze",O["CS_FRAME_RESUME"]="cs-frame-resume",O["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",O["CS_FETCH"]="cs-fetch",O["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",O["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",O["CS_LOG"]="cs-log"}(YN=BV.MessageType||(BV.MessageType={}))},{}],38:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.loadAsText=BV.readResponseAsDataURL=BV.loadAsDataURL=void 0;const YN=O("./platform");async function GC(O,Xc,BV){const GC=await fetch(O,{cache:"force-cache",credentials:"omit",referrer:BV});if(YN.isFirefox&&"text/css"===Xc&&O.startsWith("moz-extension://")&&O.endsWith(".css"))return GC;if(Xc&&!GC.headers.get("Content-Type").startsWith(Xc))throw new Error(`Mime type mismatch when loading ${O}`);if(!GC.ok)throw new Error(`Unable to load ${O} ${GC.status} ${GC.statusText}`);return GC}async function rE(O,Xc){const BV=await GC(O,Xc);return await nz(BV)}async function nz(O){const Xc=await O.blob(),BV=undefined;return await new Promise((O=>{const BV=new FileReader;BV.onloadend=()=>O(BV.result),BV.readAsDataURL(Xc)}))}async function ZB(O,Xc,BV){const YN=await GC(O,Xc,BV);return await YN.text()}BV.loadAsDataURL=rE,BV.readResponseAsDataURL=nz,BV.loadAsText=ZB},{"./platform":40}],39:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.parseGradient=void 0;const YN=O("./text"),GC="gradient".length,rE="conic-",nz=rE.length,ZB="radial-",cD="linear-";function xo(O){const Xc=[];let BV=0,xo=rE.length;for(;-1!==(BV=O.indexOf("gradient",xo));){let kA;if([cD,ZB,rE].find((Xc=>{if(BV-Xc.length>=0){const YN=undefined;if(O.substring(BV-Xc.length,BV)===Xc)return"repeating"===O.slice(BV-Xc.length-10,BV-Xc.length-1)?(kA=`repeating-${Xc}gradient`,!0):"-webkit"===O.slice(BV-Xc.length-8,BV-Xc.length-1)?(kA=`-webkit-${Xc}gradient`,!0):(kA=`${Xc}gradient`,!0)}})),!kA)break;const{start:qr,end:b}=(0,YN.getParenthesesRange)(O,BV+GC),TK=O.substring(qr+1,b-1);xo=b+1+nz,Xc.push({typeGradient:kA,match:TK,offset:kA.length+2,index:BV-kA.length+GC,hasComma:!0})}return Xc.length&&(Xc[Xc.length-1].hasComma=!1),Xc}BV.parseGradient=xo},{"./text":41}],40:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.isCSSColorSchemePropSupported=BV.isFetchSupported=BV.isXMLHttpRequestSupported=BV.compareChromeVersions=BV.isDefinedSelectorSupported=BV.firefoxVersion=BV.chromiumVersion=BV.isNonPersistent=BV.isMatchMediaChangeEventListenerBuggy=BV.isMatchMediaChangeEventListenerSupported=BV.isShadowDomSupported=BV.isMobile=BV.isMacOS=BV.isWindows=BV.isSafari=BV.isEdge=BV.isOpera=BV.isYaBrowser=BV.isVivaldi=BV.isFirefox=BV.isThunderbird=BV.isChromium=void 0;const YN="undefined"!=typeof navigator,GC=YN?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((O=>`${O.brand.toLowerCase()} ${O.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",rE=YN?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function nz(O,Xc){const BV=O.split(".").map((O=>parseInt(O))),YN=Xc.split(".").map((O=>parseInt(O)));for(let O=0;O<BV.length;O++)if(BV[O]!==YN[O])return BV[O]<YN[O]?-1:1;return 0}BV.isChromium=!0,BV.isThunderbird=!1,BV.isFirefox=!1,BV.isVivaldi=!1,BV.isYaBrowser=!1,BV.isOpera=!1,BV.isEdge=!1,BV.isSafari=!1,BV.isWindows=rE.startsWith("win"),BV.isMacOS=rE.startsWith("mac"),BV.isMobile=YN&&navigator.userAgentData?navigator.userAgentData.mobile:GC.includes("mobile"),BV.isShadowDomSupported="function"==typeof ShadowRoot,BV.isMatchMediaChangeEventListenerSupported=!0,BV.isMatchMediaChangeEventListenerBuggy=YN&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||rE.startsWith("linux"),BV.isNonPersistent=!0,BV.chromiumVersion=(()=>{const O=GC.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return O&&O[1]?O[1]:""})(),BV.firefoxVersion=(()=>{const O=GC.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return O&&O[1]?O[1]:""})(),BV.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(O){return!1}})(),BV.compareChromeVersions=nz,BV.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,BV.isFetchSupported="function"==typeof fetch,BV.isCSSColorSchemePropSupported=!0},{}],41:[function(O,Xc,BV){"use strict";function YN(O,Xc){if(!isFinite(Xc))throw new Error(`Wrong char index ${Xc}`);let BV="",YN=0,GC,rE=0;do{YN++,GC=rE,rE=O.indexOf("\n",GC+1)}while(rE>=0&&rE<=Xc);const nz=Xc-GC;return BV+=`line ${YN}, column ${nz}`,BV+="\n",Xc<O.length?BV+=O.substring(GC+1,rE):BV+=O.substring(O.lastIndexOf("\n")+1),BV+="\n",BV+=`${new Array(nz).join("-")}^`,BV}function GC(O,Xc){const BV=Math.min(O.length,Xc.length);for(let YN=0;YN<BV;YN++)if(O[YN]!==Xc[YN])return YN;return O.length!==Xc.length?BV:-1}function rE(O){return O.replace(/\r/g,"").split("\n").map((O=>O.trim())).filter((O=>O))}function nz(O){return O.concat("").join("\n")}function ZB(O,Xc,BV=0){const YN=[];let GC;for(;GC=O.exec(Xc);)YN.push(GC[BV]);return YN}function cD(O){return 2*O.length}function xo(O){function Xc(O){return O.replace(/^\s+/,"")}function BV(O){return 0===O?"":" ".repeat(4*O)}if(O.length<5e4){const Xc=/[^{}]+{\s*}/;for(;Xc.test(O);)O=O.replace(Xc,"")}const YN=O.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let GC=0;const rE=[];for(let O=0,nz=YN.length;O<nz;O++){const nz=`${YN[O]}\n`;nz.includes("{")?rE.push(BV(GC++)+Xc(nz)):nz.includes("}")?rE.push(BV(--GC)+Xc(nz)):rE.push(BV(GC)+Xc(nz))}return rE.join("").trim()}function kA(O,Xc=0){const BV=O.length;let YN=0,GC=-1;for(let rE=Xc;rE<BV;rE++)if(0===YN){const Xc=O.indexOf("(",rE);if(Xc<0)break;GC=Xc,YN++,rE=Xc}else{const Xc=O.indexOf(")",rE);if(Xc<0)break;const BV=O.indexOf("(",rE);if(BV<0||Xc<BV){if(YN--,0===YN)return{start:GC,end:Xc+1};rE=Xc}else YN++,rE=BV}return null}Object.defineProperty(BV,"__esModule",{value:!0}),BV.getParenthesesRange=BV.formatCSS=BV.getStringSize=BV.getMatches=BV.formatArray=BV.parseArray=BV.getTextDiffIndex=BV.getTextPositionMessage=void 0,BV.getTextPositionMessage=YN,BV.getTextDiffIndex=GC,BV.parseArray=rE,BV.formatArray=nz,BV.getMatches=ZB,BV.getStringSize=cD,BV.formatCSS=xo,BV.getParenthesesRange=kA},{}],42:[function(O,Xc,BV){"use strict";function YN(O){let Xc=!1,BV=null,YN;const GC=(...GC)=>{YN=GC,BV?Xc=!0:(O(...YN),BV=requestAnimationFrame((()=>{BV=null,Xc&&(O(...YN),Xc=!1)})))},rE=()=>{cancelAnimationFrame(BV),Xc=!1,BV=null};return Object.assign(GC,{cancel:rE})}function GC(){const O=[];let Xc=null;function BV(){let BV;for(;BV=O.shift();)BV();Xc=null}function YN(YN){O.push(YN),Xc||(Xc=requestAnimationFrame(BV))}function GC(){O.splice(0),cancelAnimationFrame(Xc),Xc=null}return{add:YN,cancel:GC}}Object.defineProperty(BV,"__esModule",{value:!0}),BV.createAsyncTasksQueue=BV.throttle=void 0,BV.throttle=YN,BV.createAsyncTasksQueue=GC},{}],43:[function(O,Xc,BV){"use strict";function YN(O){const Xc=O.split(":").slice(0,2),BV=O.trim().toLowerCase(),YN=BV.endsWith("am")||BV.endsWith("a.m."),GC=BV.endsWith("pm")||BV.endsWith("p.m.");let rE=Xc.length>0?parseInt(Xc[0]):0;(isNaN(rE)||rE>23)&&(rE=0),YN&&12===rE&&(rE=0),GC&&rE<12&&(rE+=12);let nz=Xc.length>1?parseInt(Xc[1]):0;return(isNaN(nz)||nz>59)&&(nz=0),[rE,nz]}function GC(O){return O.split(":").map((O=>parseInt(O)))}function rE(O,Xc){return O[0]===Xc[0]&&O[1]===Xc[1]?0:O[0]<Xc[0]||O[0]===Xc[0]&&O[1]<Xc[1]?-1:1}function nz(O,Xc,BV=new Date){const YN=GC(O),ZB=GC(Xc),cD=[BV.getHours(),BV.getMinutes()];return rE(YN,ZB)>0?nz(Xc,O,BV):0===rE(YN,ZB)?null:rE(cD,YN)<0?(BV.setHours(YN[0]),BV.setMinutes(YN[1]),BV.setSeconds(0),BV.setMilliseconds(0),BV.getTime()):rE(cD,ZB)<0?(BV.setHours(ZB[0]),BV.setMinutes(ZB[1]),BV.setSeconds(0),BV.setMilliseconds(0),BV.getTime()):new Date(BV.getFullYear(),BV.getMonth(),BV.getDate()+1,YN[0],YN[1]).getTime()}function ZB(O,Xc,BV=new Date){const YN=GC(O),nz=GC(Xc),ZB=[BV.getHours(),BV.getMinutes()];return rE(YN,nz)>0?rE(YN,ZB)<=0||rE(ZB,nz)<0:rE(YN,ZB)<=0&&rE(ZB,nz)<0}function cD(O,Xc,BV){return Xc<O?BV<=Xc||O<=BV:O<BV&&BV<Xc}function xo(O){let Xc=0;return O.seconds&&(Xc+=1e3*O.seconds),O.minutes&&(Xc+=60*O.minutes*1e3),O.hours&&(Xc+=60*O.hours*60*1e3),O.days&&(Xc+=24*O.days*60*60*1e3),Xc}function kA(O){return xo(O)/1e3/60}function qr(O,Xc,BV){const YN=Date.UTC(BV.getUTCFullYear(),0,0,0,0,0,0),GC=xo({days:1}),rE=Math.floor((BV.getTime()-YN)/GC),nz=90.83333333333333,ZB=Math.PI/180,cD=180/Math.PI,kA=Xc/15;function qr(Xc){const BV=rE+((Xc?6:18)-kA)/24,YN=.9856*BV-3.289;let GC=YN+1.916*Math.sin(YN*ZB)+.02*Math.sin(2*YN*ZB)+282.634;GC>360?GC-=360:GC<0&&(GC+=360);let qr=cD*Math.atan(.91764*Math.tan(GC*ZB));qr>360?qr-=360:qr<0&&(qr+=360);const b=undefined,TK=undefined;qr+=90*Math.floor(GC/90)-90*Math.floor(qr/90),qr/=15;const tA=.39782*Math.sin(GC*ZB),mb=Math.cos(Math.asin(tA)),Jw=(Math.cos(nz*ZB)-tA*Math.sin(O*ZB))/(mb*Math.cos(O*ZB));if(Jw>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(Jw<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const yS=undefined,bx=undefined;let CP=(Xc?360-cD*Math.acos(Jw):cD*Math.acos(Jw))/15+qr-.06571*BV-6.622-kA;return CP>24?CP-=24:CP<0&&(CP+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(CP*xo({hours:1}))}}const b=qr(!0),TK=qr(!1);return b.alwaysDay||TK.alwaysDay?{alwaysDay:!0}:b.alwaysNight||TK.alwaysNight?{alwaysNight:!0}:{sunriseTime:b.time,sunsetTime:TK.time}}function b(O,Xc,BV=new Date){const YN=qr(O,Xc,BV);if(YN.alwaysDay)return!1;if(YN.alwaysNight)return!0;const GC=YN.sunriseTime,rE=undefined,nz=undefined;return cD(YN.sunsetTime,GC,BV.getUTCHours()*xo({hours:1})+BV.getUTCMinutes()*xo({minutes:1})+BV.getUTCSeconds()*xo({seconds:1})+BV.getUTCMilliseconds())}function TK(O,Xc,BV=new Date){const YN=qr(O,Xc,BV);if(YN.alwaysDay)return BV.getTime()+xo({days:1});if(YN.alwaysNight)return BV.getTime()+xo({days:1});const[GC,rE]=YN.sunriseTime<YN.sunsetTime?[YN.sunriseTime,YN.sunsetTime]:[YN.sunsetTime,YN.sunriseTime],nz=BV.getUTCHours()*xo({hours:1})+BV.getUTCMinutes()*xo({minutes:1})+BV.getUTCSeconds()*xo({seconds:1})+BV.getUTCMilliseconds();return nz<=GC?Date.UTC(BV.getUTCFullYear(),BV.getUTCMonth(),BV.getUTCDate(),0,0,0,GC):nz<=rE?Date.UTC(BV.getUTCFullYear(),BV.getUTCMonth(),BV.getUTCDate(),0,0,0,rE):Date.UTC(BV.getUTCFullYear(),BV.getUTCMonth(),BV.getUTCDate()+1,0,0,0,GC)}Object.defineProperty(BV,"__esModule",{value:!0}),BV.nextTimeChangeAtLocation=BV.isNightAtLocation=BV.getDurationInMinutes=BV.getDuration=BV.isInTimeIntervalLocal=BV.nextTimeInterval=BV.parseTime=void 0,BV.parseTime=YN,BV.nextTimeInterval=nz,BV.isInTimeIntervalLocal=ZB,BV.getDuration=xo,BV.getDurationInMinutes=kA,BV.isNightAtLocation=b,BV.nextTimeChangeAtLocation=TK},{}],44:[function(O,Xc,BV){"use strict";function YN(O){return(O<16?"0":"")+O.toString(16)}function GC(){if("randomUUID"in crypto){const O=crypto.randomUUID();return O.substring(0,8)+O.substring(9,13)+O.substring(14,18)+O.substring(19,23)+O.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((O=>YN(O))).join("")}Object.defineProperty(BV,"__esModule",{value:!0}),BV.generateUID=void 0,BV.generateUID=GC},{}],45:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.isLocalFile=BV.fullyQualifiedDomainMatchesWildcard=BV.isFullyQualifiedDomainWildcard=BV.isFullyQualifiedDomain=BV.isURLEnabled=BV.isPDF=BV.isURLMatched=BV.isURLInList=BV.compareURLPatterns=BV.getURLHostOrProtocol=BV.isRelativeHrefOnAbsolutePath=BV.getAbsoluteURL=BV.parseURL=BV.parsedURLCache=void 0;const YN=O("./ipv6"),GC=!1;let rE;function nz(O){return rE||(rE=document.createElement("a")),rE.href=O,rE.href}function ZB(O,Xc=null){const YN=`${O}${Xc?`;${Xc}`:""}`;if(BV.parsedURLCache.has(YN))return BV.parsedURLCache.get(YN);if(Xc){const GC=new URL(O,nz(Xc));return BV.parsedURLCache.set(YN,GC),GC}const GC=new URL(nz(O));return BV.parsedURLCache.set(O,GC),GC}function cD(O,Xc){if(Xc.match(/^data\\?\:/))return Xc;if(/^\/\//.test(Xc))return`${location.protocol}${Xc}`;const BV=ZB(O),YN=undefined;return ZB(Xc,BV.href).href}function xo(O){if(O.startsWith("data:"))return!0;const Xc=ZB(O);return Xc.protocol===location.protocol&&(Xc.hostname===location.hostname&&(Xc.port===location.port&&Xc.pathname===location.pathname))}function kA(O){const Xc=new URL(O);return Xc.host?Xc.host:"file:"===Xc.protocol?Xc.pathname:Xc.protocol}function qr(O,Xc){return O.localeCompare(Xc)}function b(O,Xc){for(let BV=0;BV<Xc.length;BV++)if(TK(O,Xc[BV]))return!0;return!1}function TK(O,Xc){const BV=(0,YN.isIPV6)(O),GC=(0,YN.isIPV6)(Xc);if(BV&&GC)return(0,YN.compareIPV6)(O,Xc);if(!BV&&!GC){const BV=tA(Xc);return null!==BV&&Boolean(O.match(BV))}return!1}function tA(O){try{const Xc="^"===(O=O.trim())[0],BV="$"===O[O.length-1],YN=/\/\$?$/.test(O);let GC,rE,nz;(GC=(O=O.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(rE=O.substring(0,GC),nz=O.replace(/\$/g,"").substring(GC)):rE=O.replace(/\$/g,"");let ZB=Xc?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const cD=rE.split(".");ZB+="(";for(let O=0;O<cD.length;O++)"*"===cD[O]&&(cD[O]="[^\\.\\/]+?");return ZB+=cD.join("\\."),ZB+=")",nz&&(ZB+="(",ZB+=nz.replace("/","\\/"),ZB+=")"),ZB+=BV?"(\\/?(\\?[^/]*?)?)$":`(\\/${YN?"":"?"}.*?)$`,new RegExp(ZB,"i")}catch(O){return null}}function mb(O){if(O.includes(".pdf")){if(O.includes("?")&&(O=O.substring(0,O.lastIndexOf("?"))),O.includes("#")&&(O=O.substring(0,O.lastIndexOf("#"))),O.match(/(wikipedia|wikimedia)\.org/i)&&O.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||O.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&O.match(/\.pdf$/i)||O.match(/dropbox\.com\/s\//i)&&O.match(/\.pdf$/i))return!1;if(!O.endsWith(".pdf"))return!1;for(let Xc=O.length;Xc>0;Xc--){if("="===O[Xc])return!1;if("/"===O[Xc])return!0}}return!1}function Jw(O,Xc,{isProtected:BV,isInDarkList:YN,isDarkThemeDetected:rE},nz=!0){if(UK(O)&&!nz)return!1;if(BV&&!Xc.enableForProtectedPages)return!1;if(GC)return!0;if(mb(O))return Xc.enableForPDF;const ZB=b(O,Xc.siteList),cD=b(O,Xc.siteListEnabled);return Xc.applyToListedOnly?cD||ZB:!!cD||!(YN||Xc.detectDarkTheme&&rE)&&!ZB}function yS(O){return/^[a-z0-9\.\-]+$/i.test(O)&&-1===O.indexOf("..")}function bx(O){if(!O.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(O))return!1;const Xc=O.split(".");for(const O of Xc)if("*"!==O&&!/^[a-z0-9\-]+$/i.test(O))return!1;return!0}function CP(O,Xc){const BV=O.toLowerCase().split("."),YN=Xc.toLowerCase().split(".");if(YN.length<BV.length)return!1;for(;BV.length;){const O=BV.pop(),Xc=YN.pop();if("*"!==O&&O!==Xc)return!1}return!0}function UK(O){return O&&O.startsWith("file:///")}BV.parsedURLCache=new Map,BV.parseURL=ZB,BV.getAbsoluteURL=cD,BV.isRelativeHrefOnAbsolutePath=xo,BV.getURLHostOrProtocol=kA,BV.compareURLPatterns=qr,BV.isURLInList=b,BV.isURLMatched=TK,BV.isPDF=mb,BV.isURLEnabled=Jw,BV.isFullyQualifiedDomain=yS,BV.isFullyQualifiedDomainWildcard=bx,BV.fullyQualifiedDomainMatchesWildcard=CP,BV.isLocalFile=UK},{"./ipv6":34}],46:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),BV.documentIsVisible=BV.removeDocumentVisibilityListener=BV.setDocumentVisibilityListener=void 0;let YN=null,GC=!document.hidden;const rE={capture:!0,passive:!0};function nz(){document.addEventListener("visibilitychange",YN,rE),window.addEventListener("pageshow",YN,rE),window.addEventListener("focus",YN,rE)}function ZB(){document.removeEventListener("visibilitychange",YN,rE),window.removeEventListener("pageshow",YN,rE),window.removeEventListener("focus",YN,rE)}function cD(O){const Xc=Boolean(YN);YN=()=>{document.hidden||(xo(),O(),GC=!0)},Xc||nz()}function xo(){ZB(),YN=null}function kA(){return GC}BV.setDocumentVisibilityListener=cD,BV.removeDocumentVisibilityListener=xo,BV.documentIsVisible=kA},{}],47:[function(O,Xc,BV){"use strict";Object.defineProperty(BV,"__esModule",{value:!0}),O("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":2}]},{},[47]);